---
title: Предварительные версии в пакетах NuGet
description: Инструкции по созданию пакетов предварительных версий
author: karann-msft
ms.author: karann
ms.date: 08/14/2017
ms.topic: conceptual
ms.openlocfilehash: 696f51905198defdbfd475ba7d010ac3e27ac557
ms.sourcegitcommit: 3fc93f7a64be040699fe12125977dd25a7948470
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/29/2019
ms.locfileid: "64877940"
---
# <a name="building-pre-release-packages"></a>Сборка пакетов предварительных версий

При выпуске обновленного пакета с новым номером версии NuGet считает его "последней стабильной версией", что указывается, например, в пользовательском интерфейсе диспетчера пакетов в Visual Studio.

![Указание последней стабильной версии в пользовательском интерфейсе диспетчера пакетов](media/Prerelease_01-LatestStable.png)

Стабильная версия — это версия, которая считается достаточно надежной для использования в рабочей среде. Последняя стабильная версия также устанавливается в качестве обновления пакета или во время восстановления пакета (с учетом ограничений, которые описываются в разделе [Повторная установка и обновление пакетов](../consume-packages/reinstalling-and-updating-packages.md)).

Для поддержки жизненного цикла выпуска программного обеспечения в NuGet 1.6 и более поздних версиях возможно распространение пакетов предварительных версий, номера версий которых включают в себя суффикс семантического версионирования, например `-alpha`, `-beta` или `-rc`. Дополнительные сведения см. в разделе [Управление версиями пакета](../reference/package-versioning.md#pre-release-versions).

Такие версии можно указывать тремя способами.

- Файл `.nuspec`: включите суффикс семантического версионирования в элемент `version`.

    ```xml
    <version>1.0.1-alpha</version>
    ```

- Файл `.csproj`: включите суффикс семантического версионирования в элемент `PackageVersion`.

    ```xml
    <PropertyGroup>
        <PackageVersion>1.0.1-alpha</PackageVersion>
    </PropertyGroup>
    ```

- Атрибуты сборки: укажите версию с помощью `AssemblyInformationalVersionAttribute`.

    ```cs
    [assembly: AssemblyInformationalVersion("1.0.1-beta")]
    ```

    NuGet использует это значение вместо указанного в атрибуте `AssemblyVersion`, который не поддерживает семантическое версионирование.

Когда вы будете готовы выпустить стабильную версию, просто удалите суффикс, и пакет будет иметь приоритет над любыми предварительными версиями. См. раздел [Управление версиями пакета](../reference/package-versioning.md#pre-release-versions).

## <a name="installing-and-updating-pre-release-packages"></a>Установка и обновление пакетов предварительных версий

По умолчанию NuGet не включает предварительные версии при работе с пакетами, но это поведение можно изменить, выполнив указанные ниже действия.

- **Пользовательский интерфейс диспетчера пакетов в Visual Studio**. В окне **Управление пакетами NuGet** установите флажок **Включить предварительные версии**.

    ![Флажок "Включить предварительные версии" в Visual Studio](media/Prerelease_02-CheckPrerelease.png)

    При установке или снятии этого флажка список доступных версий, которые можно установить, в пользовательском интерфейсе диспетчера пакетов обновляется.

- **Консоль диспетчера пакетов**. Используйте параметр `-IncludePrerelease` с командами `Find-Package`, `Get-Package`, `Install-Package`, `Sync-Package` и `Update-Package`. См. [справочник по PowerShell](../tools/powershell-reference.md).

- **Интерфейс командной строки NuGet**. Используйте параметр `-prerelease` с командами `install`, `update`, `delete` и `mirror`. См. [справочник по интерфейсу командной строки NuGet](../tools/nuget-exe-cli-reference.md)

## <a name="semantic-versioning"></a>Семантическое версионирование

[Соглашение о семантическом версионировании (SemVer)](http://semver.org/spec/v1.0.0.html) описывает, как следует использовать строки в номерах версий для передачи назначения базового кода.

Согласно этому соглашению каждый номер версии состоит из трех частей (`Major.Minor.Patch`) со следующими значениями:

- `Major`: Критические изменения
- `Minor`: новые функции; сохраняется обратная совместимость;
- `Patch`: исправления ошибок; сохраняется обратная совместимость.

Предварительные версии в этом случае обозначаются с помощью дефиса и строки, которые добавляются после номера исправления. После дефиса можно использовать *любую* строку, чтобы пакет распознавался в NuGet как предварительная версия. В этом случае NuGet выводит полный номер версии в соответствующем пользовательском интерфейсе, а интерпретировать его значение пользователям приходится самостоятельно.

Учитывая это, желательно придерживаться общепринятых соглашений об именовании, например следующих:

- `-alpha`: альфа-версия, обычно используемая для текущей работы и экспериментирования;
- `-beta`: бета-версия, которая обычно содержит полный набор функций для следующего запланированного выпуска, но может иметь известные ошибки;
- `-rc`: версия-кандидат, которая обычно может служить итоговой (стабильной), если не будут выявлены серьезные ошибки.

> [!Note]
> NuGet 4.3.0+ поддерживает [Семантическое версионирование версии 2.0.0](http://semver.org/spec/v2.0.0.html), которое позволяет использовать номера предварительных версий с точечной нотацией, как в случае `1.0.1-build.23`. В версиях NuGet, предшествующих 4.3.0, точечная нотация не поддерживается. В предыдущих версиях NuGet можно было использовать формат наподобие `1.0.1-build23`, но такие номера всегда распознавались как номера предварительных версий.

Какие бы суффиксы ни использовались, в NuGet их приоритет определяется в обратном алфавитном порядке:

    1.0.1
    1.0.1-zzz
    1.0.1-rc
    1.0.1-open
    1.0.1-beta12
    1.0.1-beta05
    1.0.1-beta
    1.0.1-alpha2
    1.0.1-alpha

Из этого следует, что версия с номером без суффикса всегда будет иметь приоритет над предварительными версиями. Кроме того, имейте в виду, что если в тегах предварительных версий используются числовые суффиксы из двух или более цифр, следует добавлять начальные нули, например beta01 или beta05. Это позволит обеспечить правильную сортировку номеров.
