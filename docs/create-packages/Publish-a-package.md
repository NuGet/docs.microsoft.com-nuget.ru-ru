---
title: Публикация пакета NuGet
description: Подробные инструкции по публикации пакета NuGet на веб-сайте nuget.org или в закрытых веб-каналах, а также по управлению владением пакетом nuget.org.
author: karann-msft
ms.author: karann
ms.date: 05/18/2018
ms.topic: conceptual
ms.reviewer: anangaur
ms.openlocfilehash: bd19bc402ff9d66d7e2baa4f326d75f0ed444f30
ms.sourcegitcommit: b6efd4b210d92bf163c67e412ca9a5a018d117f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/26/2019
ms.locfileid: "56852576"
---
# <a name="publishing-packages"></a>Публикация пакетов

После создания пакета и получения файла `.nupkg` его можно легко опубликовать для других разработчиков на общедоступных или закрытых ресурсах:

- Открытые пакеты публикуются для других разработчиков на глобальном веб-сайте [nuget.org](https://www.nuget.org/packages/manage/upload), как описывается в этой статье (требуется NuGet 4.1.0+).
- Закрытые пакеты публикуются только для команд или организаций путем размещения на общем файловом ресурсе, закрытом сервере NuGet, в [Azure Artifacts](https://www.visualstudio.com/docs/package/nuget/publish) или стороннем репозитории, таком как myget, ProGet, Nexus Repository или Artifactory. Дополнительные сведения см. в разделе [Общее сведения о размещении пакетов](../hosting-packages/overview.md).

В этой статье описывается публикация на веб-сайте nuget.org. Сведения о публикации в Azure Artifacts см. в статье [Управление пакетами](https://www.visualstudio.com/docs/package/nuget/publish).

## <a name="publish-to-nugetorg"></a>Публикация на веб-сайте nuget.org

Сначала необходимо войти на сайт nuget.org под учетной записью Майкрософт, с помощью которой на нем необходимо зарегистрироваться. Вы также можете войти с помощью учетной записи nuget.org, созданной в предыдущих версиях портала.

![Местоположение входа в NuGet](media/publish_NuGetSignIn.png)

Далее можно отправить пакет через веб-портал nuget.org, выполнить принудительную отправку на веб-сайт nuget.org из командной строки (требуется `nuget.exe` 4.1.0 или более поздних версий) или опубликовать в рамках процесса непрерывной интеграции и развертывания (CI/CD) через Azure DevOps Services, как описывается в следующих разделах.

### <a name="web-portal-use-the-upload-package-tab-on-nugetorg"></a>Веб-портал. Использование вкладки Upload Package (Отправить пакет) на сайте nuget.org

1. В верхнем меню сайта nuget.org выберите **Upload** (Передать) и перейдите к расположению пакета.

    ![Передача пакета на сайт nuget.org](media/publish_UploadYourPackage.PNG)

1. На сайте nuget.org отображается, доступно ли имя пакета. Если нет, необходимо изменить идентификатор пакета в проекте, перестроить его и попробовать отправить еще раз.

1. Если имя пакета доступно, на сайте nuget.org откроется раздел **Verify** (Проверка), в котором можно просмотреть метаданные из манифеста пакета. Чтобы изменить метаданные, измените проект (файл проекта или файл`.nuspec`), перестройте его, повторно создайте пакет и загрузите еще раз.

1. В разделе **Import Documentation** (Импортировать документацию) вы можете вставить файл Markdown, добавить URL-адреса документов или передать файл документации.

1. После введения всех сведений нажмите кнопку **Submit** (Отправить).

### <a name="command-line"></a>Командная строка

Для принудительной отправки пакетов на веб-сайт nuget.org необходимо использовать [nuget.exe версии 4.1.0 или более поздней](https://www.nuget.org/downloads), где реализуются требуемые [протоколы NuGet](../api/nuget-protocols.md). Вам также потребуется ключ API, который создается на сайте nuget.org.

#### <a name="create-api-keys"></a>Создание ключей API

[!INCLUDE [publish-api-key](../quickstart/includes/publish-api-key.md)]

#### <a name="publish-with-dotnet-nuget-push"></a>Публикация с помощью команды dotnet nuget push

[!INCLUDE [publish-dotnet](../quickstart/includes/publish-dotnet.md)]

#### <a name="publish-with-nuget-push"></a>Публикация с помощью команды nuget push

1. В окне командной строки выполните следующую команду, заменив `<your_API_key>` ключом, полученным на сайте nuget.org:

    ```cli
    nuget setApiKey <your_API_key>
    ```

    Эта команда сохраняет ключ API в конфигурации NuGet. Это действие нужно повторить еще раз на том же компьютере.

1. Выполните принудительную отправку в коллекцию NuGet с помощью следующей команды:

    ```cli
    nuget push YourPackage.nupkg -Source https://api.nuget.org/v3/index.json
    ```

#### <a name="publish-signed-packages"></a>Публикация подписанных пакетов

Для отправки подписанных пакетов необходимо сначала [зарегистрировать сертификат](../reference/Signed-Packages-Reference.md#register-certificate-on-nugetorg), который используется для подписи пакетов. 

> [!Warning]
> Nuget.org отклоняет пакеты, которые не соответствуют [требованиям к подписанным пакетам](../reference/Signed-Packages-Reference.md#signature-requirements-on-nugetorg).

### <a name="package-validation-and-indexing"></a>Проверка и индексирование пакета

Пакеты, передаваемые на веб-сайт nuget.org, проходят несколько проверок, например проверку на вирусы. (Все пакеты на сайте nuget.org периодически сканируются.)

. После того как пакет пройдет все проверки, он будет индексирован и появится в результатах поиска спустя некоторое время. По завершении индексирования вы получите по электронной почте подтверждение о том, что пакет был успешно опубликован. Если пакет не проходит проверку, на странице сведений о пакете отображается соответствующее уведомление об ошибке и вы также получите сообщение электронной почты с уведомлением.

Проверка и индексирование пакета обычно занимает около 15 минут. Если публикация пакета занимает больше времени, перейдите на веб-сайт [status.nuget.org](https://status.nuget.org/) и убедитесь, что портал nuget.org работает. Если все системы исправны, но пакет не был опубликован в течение часа, войдите на веб-сайт nuget.org и свяжитесь с нами по ссылке "Связаться со службой поддержки" на странице пакета.

Чтобы просмотреть состояние пакета, на сайте nuget.org под именем учетной записи выберите **Manage packages** (Управление пакетами). После завершения проверки появится сообщение с подтверждением.

Обратите внимание, что пакет индексируется и будет появляться в результатах поиска для других пользователей спустя определенное время. В этот период на странице вашего пакета будет отображаться следующее сообщение:

![Сообщение о том, что пакет не опубликовано](media/publish_NotYetIndexed.png)

### <a name="azure-devops-services-cicd"></a>Azure DevOps Services (CI/CD)

Если вы отправляете пакеты на веб-сайт nuget.org с использованием Azure DevOps Services в рамках процесса непрерывной интеграции и развертывания, необходимо использовать `nuget.exe` 4.1 или более поздних версий в задачах NuGet. Дополнительные сведения см. в разделе [Использование последней версии NuGet в сборках](https://blogs.msdn.microsoft.com/devops/2017/09/29/using-the-latest-nuget-in-your-build/) (блог Microsoft DevOps).

## <a name="managing-package-owners-on-nugetorg"></a>Управление владельцами пакетов на веб-сайте nuget.org

Несмотря на то, что в файле `.nuspec` каждого пакета NuGet определены авторы пакета, в коллекции nuget.org эти метаданные не используются для определения владельцев. Вместо этого веб-сайт nuget.org назначает первичные права владения пользователю, который публикует пакет. Это может быть выполнивший вход в систему пользователь, который отправил пакет через пользовательский интерфейс nuget.org, или пользователь, чей ключ API использовался в команде `nuget SetApiKey` или `nuget push`.

Все владельцы пакета имеют полные разрешения на него, в том числе на добавление и удаление других владельцев, а также на публикацию обновлений.

Чтобы изменить владельца пакета, выполните следующие действия:

1. Войдите на веб-сайт nuget.org, используя учетную запись текущего владельца пакета.
1. Выберите имя учетной записи, щелкните **Manage packages** (Управление пакетами) и разверните узел **Published Packages** (Опубликованные пакеты).
1. Выберите пакет, которым требуется управлять, а затем в правой части выберите **Manage owners** (Управление владельцами).

В этом разделе можно выполнить разные действия:

1. Удалите любого владельца из раздела **Current Owners** (Текущие владельцы).
1. Добавьте владельца в разделе **Add Owner** (Добавление владельца). Для этого введите имя пользователя, сообщение и нажмите кнопку **Add** (Добавить). После этого новому совладельцу будет отправлено сообщение электронной почты со ссылкой для подтверждения. После подтверждения этот пользователь получит полные права доступа для добавления и удаления владельцев. (До подтверждения в разделе **Current Owners** (Текущие владельцы) для этого пользователя будет отображаться уведомление об ожидании утверждения.)
1. Чтобы передать права владельца (например, в случае смены владельца или публикации с использованием неверной учетной записи), добавьте нового владельца и после получения подтверждения от него попросите удалить вашего пользователя из списка.

Чтобы назначить права владения компании или группе, создайте учетную запись на веб-сайте nuget.org с использованием псевдонима электронной почты, который пересылается соответствующим членам группы. Например, многие пакеты ASP.NET корпорации Майкрософт находятся в совместном владении учетных записей [microsoft](http://nuget.org/profiles/microsoft) и [aspnet](http://nuget.org/profiles/aspnet), которые представляют собой подобные псевдонимы.

### <a name="recovering-package-ownership"></a>Восстановление прав владения пакетом

В некоторых случаях у пакета может отсутствовать активный владелец. Например, исходный владелец может покинуть компанию, которая создает пакет, могут быть утрачены учетные данные nuget.org или из-за предыдущих ошибок в коллекции пакет может остаться без владельца.

Если вы являетесь полноправным владельцем пакета и хотите восстановить права владения, воспользуйтесь [формой для связи](https://www.nuget.org/policies/Contact) на веб-сайте nuget.org и опишите вашу ситуацию сотруднику NuGet. После этого мы проверим ваши права владения пакетом, в том числе попытаемся найти существующего владельца по URL-адресу проекта пакета, через Twitter по электронной почте или другими способами. Если эти способы не помогут, мы пришлем вам новое приглашение стать владельцем.
