---
title: Вопросы и ответы по NuGet
description: Вопросы и ответы по использованию NuGet в командной строке и в Visual Studio, а также по работе с коллекцией NuGet.
author: shishirx34
ms.author: shishirh
ms.date: 01/15/2019
ms.topic: conceptual
ms.openlocfilehash: 1c838116f9737b01ea3f9ca17f5d5002f6548044
ms.sourcegitcommit: 85bf94e0efcfcee1f914650bdc142309ef3e06d9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/01/2019
ms.locfileid: "57196217"
---
# <a name="nuget-frequently-asked-questions"></a>Вопросы и ответы по NuGet

**Что необходимо для запуска NuGet?**

Все данные по пользовательскому интерфейсу и средствам командной строки доступны в [руководстве по установке](../install-nuget-client-tools.md).

**Поддерживает ли NuGet Mono?**

Средство командной строки `nuget.exe` выполняет построение и запускается с помощью Mono 3.2 или более поздней версии и поддерживает создание пакетов в Mono.

Несмотря на то, что `nuget.exe` полностью работает в Windows, в Linux и OS X существуют известные проблемы. См. раздел GitHub, посвященный [проблемам с Mono](https://github.com/NuGet/Home/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+mono).

[Графический клиент](https://github.com/mrward/monodevelop-nuget-addin) доступен в виде надстройки для MonoDevelop.

**Как можно определить, что содержит пакет, и является ли он стабильным и полезным для моего приложения?**

Основным источником информации о пакете является его страница сведений на веб-сайте nuget.org (или в другом закрытом веб-канале). На странице каждого пакета на веб-сайте nuget.org приводится описание проекта, история его версий и статистика использования. В разделе **Сведения** на странице пакета также приводится ссылка на веб-сайт проекта, где обычно можно найти много примеров и других документов, с помощью которых можно оценить полезность пакета.

Дополнительные сведения см. в разделе [Поиск и выбор пакетов](../consume-packages/finding-and-choosing-packages.md).

## <a name="nuget-in-visual-studio"></a>NuGet в среде Visual Studio

**Каким образом обеспечивается поддержка NuGet в различных продуктах Visual Studio?**

- Visual Studio для Windows поддерживает [пользовательский интерфейс диспетчера пакетов](../tools/package-manager-ui.md) и [консоль диспетчера пакетов](../tools/package-manager-console.md).
- Visual Studio для Mac реализует встроенные возможности NuGet, которые описываются в разделе [Включение пакета NuGet в проект](/visualstudio/mac/nuget-walkthrough).
- Visual Studio Code для всех платформ не поддерживает прямую интеграцию с NuGet. Используйте [интерфейс командной строки NuGet](../tools/nuget-exe-cli-reference.md) или [интерфейс командной строки dotnet](../tools/dotnet-commands.md).
- Azure DevOps реализует [шаг построения для восстановления пакетов NuGet](/vsts/build-release/tasks/package/nuget). Также вы можете [разместить закрытые веб-каналы NuGet в Azure DevOps](https://docs.microsoft.com/azure/devops/artifacts/nuget/publish).

**Как определить точную версию устанавливаемых средств NuGet?**

В Visual Studio выберите **Справка > О Microsoft Visual Studio** и проверьте версию компонента **Диспетчер пакетов NuGet**.

Также можно запустить консоль диспетчера пакетов (**Сервис > Диспетчер пакетов NuGet > Консоль диспетчера пакетов**) и ввести `$host`, чтобы просмотреть сведения о версии NuGet и другую информацию.

**Какие языки программирования поддерживает NuGet?**

NuGet обычно работает с языками платформы .NET и предназначен для использования библиотек .NET в проекте. Поскольку для проектов некоторых типов также поддерживаются средства автоматизации MSBuild и Visual Studio, в определенной степени также поддерживаются другие проекты и языки.

Последняя версия NuGet поддерживает C#, Visual Basic, F#, WiX и C++.

**Какие шаблоны проектов поддерживает NuGet?**

NuGet обеспечивает полную поддержку множества шаблонов проектов, включая Windows, Интернет, облако, SharePoint, Wix и другие.

**Как обновить пакеты, которые являются частью шаблонов Visual Studio?**

Перейдите на вкладку **Обновления** в пользовательском интерфейсе диспетчера проектов и выберите **Обновить все** или воспользуйтесь [командой `Update-Package`](../tools/ps-ref-update-package.md) в консоли диспетчера проектов.

Чтобы обновить сам шаблон, необходимо вручную обновить репозиторий шаблонов. Дополнительные сведения по этой теме см. в [блоге Ксавье Декостера (Xavier Decoster)](http://www.xavierdecoster.com/update-project-template-to-latest-nuget-packages). Обратите внимание, что все это вы делаете на свой страх и риск, поскольку ручное обновление может привести к повреждению шаблона в том случае, если последние версии всех зависимостей несовместимы друг с другом.

**Можно ли использовать NuGet вне среды Visual Studio?**

Да. NuGet работает непосредственно из командной строки. См. [руководство по установке](../install-nuget-client-tools.md) и [справочник по интерфейсу командной строки](../tools/nuget-exe-cli-reference.md).

## <a name="nuget-command-line"></a>Командная строка NuGet

**Как получить последнюю версию средства командной строки NuGet?**

См. [руководство по установке](../install-nuget-client-tools.md).

**Для чего нужна лицензия на веб-сайте nuget.exe?**

Вы можете распространить nuget.exe в соответствии с условиями лицензии MIT. Вы несете ответственность за обновление и обслуживание всех распространяемых вами копий nuget.exe.

**Можно ли расширить возможности средства командной строки NuGet?**

Да. Вы можете добавлять в `nuget.exe` собственные команды, как описывается в [статье Роба Рейнолда (Rob Reynold)](http://geekswithblogs.net/robz/archive/2011/07/15/extend-nuget-command-line.aspx).

## <a name="nuget-package-manager-console-visual-studio-on-windows"></a>Консоль диспетчера пакетов NuGet (Visual Studio для Windows)

**Как получить доступ к объекту DTE в консоли диспетчера пакетов?**

Объект верхнего уровня в объектной модели автоматизации Visual Studio называется объектом DTE (среда средств разработки). Этот объект предоставляется консолью с помощью переменной `$DTE`. Дополнительные сведения см. в разделе [Общие сведения о модели автоматизации](/visualstudio/extensibility/internals/automation-model-overview) в документации по расширению среды Visual Studio.

**При попытке привести переменную $DTE к типу DTE2 возникает ошибка: "Не удается преобразовать значение "EnvDTE.DTEClass" типа "EnvDTE.DTEClass" в тип "EnvDTE80.DTE2"". В чем проблема?**

Это известная проблема, связанная с взаимодействием PowerShell с COM-объектом. Попробуйте выполнить следующие действия:

```ps
`$dte2 = Get-Interface $dte ([EnvDTE80.DTE2])`
```

`Get-Interface` — это вспомогательная функция, добавляемая узлом PowerShell NuGet.

## <a name="creating-and-publishing-packages"></a>Создание и публикация пакетов

**Как включить мой пакет в веб-канал?**

См. раздел [Создание и публикация пакетов](../quickstart/create-and-publish-a-package.md).

**У меня есть несколько версий библиотеки, предназначенных для различных версий платформы .NET Framework. Как построить единый пакет, поддерживающий такую реализацию?**

См. раздел [Поддержка нескольких версий и профилей платформы .NET Framework](../create-packages/supporting-multiple-target-frameworks.md).

**Как настроить свой собственный репозиторий или веб-канал?**

См. раздел [Общие сведения о размещении пакетов](../hosting-packages/overview.md).

**Как выполнить массовую загрузку пакетов в мой веб-канал NuGet?**

См. раздел [Массовая публикация пакетов NuGet](http://jeffhandley.com/archive/2012/12/13/Bulk-Publishing-NuGet-Packages.aspx) (jeffhandly.com).

## <a name="working-with-packages"></a>Работа с пакетами

**В чем разница между пакетами уровня проекта и уровня решения?**

Пакет уровня решения (NuGet версии 3.x или более поздней) устанавливается в решении только один раз и после этого доступен для всех проектов решения. Пакет уровня проекта устанавливается в каждом проекте, который его использует. Пакет уровня решения также может устанавливать новые команды, которые могут вызываться из консоли диспетчера пакетов.

**Можно ли устанавливать пакеты NuGet без подключения к Интернету?**

Да. См. статью блога Скотта Ханселмана (Scott Hanselman), посвященную [доступу к NuGet при неработающем веб-сайте nuget.org или во время полета на самолете](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx) (hanselman.com).

**Можно ли устанавливать пакеты в папку, отличную от заданной по умолчанию?**

Задайте параметр [`repositoryPath`](../reference/nuget-config-file.md#config-section) в файле `Nuget.Config`, используя `nuget config -set repositoryPath=<path>`.

**Как избежать добавления папки пакетов NuGet в систему управления версиями?**

Присвойте свойству [`disableSourceControlIntegration`](../reference/nuget-config-file.md#solution-section) в файле `Nuget.Config` значение `true`. Этот ключ работает на уровне решения и поэтому должен добавляться в файл `$(Solutiondir)\.nuget\Nuget.Config`. Если включить восстановление пакета из Visual Studio, этот файл будет создан автоматически.

**Как отключить восстановление пакетов?**

См. раздел [Включение и отключение восстановления пакетов](../consume-packages/package-restore.md#enabling-and-disabling-package-restore).

**Почему при установке локального пакета с удаленными зависимостями возникает ошибка "Не удается разрешить зависимость"?**

При установке локального пакета в проект выберите источник **Все**. При этом вместо использования одного веб-канала будут объединены все веб-каналы. Причиной этой ошибки обычно является то, что пользователи локального репозитория часто стремятся избежать случайной установки удаленного пакета из-за требований корпоративной политики.

**У меня есть несколько проектов, расположенных в одной папке. Как использовать отдельные файлы packages.config для каждого проекта?**

В большинстве случаев, когда отдельные проекты располагаются в отдельных папках, это не проблема, поскольку NuGet идентифицирует файлы `packages.config` в каждом проекте. Если вы работаете с NuGet версии 3.3 или более поздней и размещаете несколько проектов в одной папке, вы можете вставить имя проекта в имена файлов `packages.config`, используя шаблон `packages.{project-name}.config`. NuGet будет использовать этот файл.

Это также не проблема при использовании PackageReference, поскольку каждый файл проекта содержит собственный список зависимостей.

**Я не вижу nuget.org в списке репозиториев. Как вернуть его?**

- Добавьте `https://api.nuget.org/v3/index.json` в список источников или
- Удалите файл `%appdata%\.nuget\NuGet.Config` (Windows) или `~/.nuget/NuGet/NuGet.Config` (Mac/Linux) и дождитесь, пока NuGet снова создаст его.

**Какие условия лицензирования применяются по умолчанию, если для пакета не указаны никакие сведения о лицензии?**

В отношении каждого пакета действуют входящие в него условия. Прежде чем получать доступ к пакетам, скачивать или получать их, необходимо ознакомиться с соответствующими условиями. Воспользуйтесь ссылкой **Сведения о лицензии** на странице пакета на веб-сайте nuget.org.

Если для пакета не заданы условия лицензии, следует обратиться непосредственно к владельцу пакета **по ссылке для связи с владельцем** на странице пакета на веб-сайте nuget.org. Корпорация Майкрософт не предоставляет вам лицензию на какую-либо интеллектуальную собственность сторонних поставщиков пакетов и не несет ответственность за сведения, предоставляемые третьими лицами.

## <a name="managing-packages-on-nugetorg"></a>Управление пакетами на веб-сайте NuGet.org

**Можно ли изменить метаданные пакета после его отправки?**

NuGet рекомендует подписать все пакеты. Основополагающим принципом подписывания является то, что содержимое подписанного пакета, включая файл nuspec, является неизменным. При редактировании метаданных пакета изменяется файл nuspec, в результате чего существующие подписи становятся недействительными. Мы рекомендуем изменить существующие рабочие процессы таким образом, чтобы после создания пакета не требовалось редактирование его метаданных.

Обратите внимание, что перечисленные в пакете зависимости создаются автоматически на основании самого пакета и не могут быть изменены.

Кроме того, отправка пакета на веб-сайт [int.nugettest.org](https://int.nugettest.org) позволяет легко протестировать и проверить пакет, не публикуя его в общедоступной коллекции. Конечная точка API: https://apiint.nugettest.org/v3/index.json

**Можно ли удалить пакет, опубликованный на сайте NuGet.org?**

Как правило, удаление пакетов, опубликованных на сайте NuGet.org, не поддерживается. Дополнительные сведения о [политике удаления пакетов](../policies/deleting-packages).

**Можно ли зарезервировать имена для пакетов, которые будут опубликованы в будущем?**

Да. Вы можете зарезервировать идентификаторы пакетов на веб-сайте [nuget.org](https://www.nuget.org/), запросив префикс идентификатора пакета для своей учетной записи. Чтобы запросить префикс идентификатора пакета, следуйте инструкциям в [документации](https://docs.microsoft.com/nuget/reference/id-prefix-reservation).

**Как заявить о правах владельца пакетов?**

См. раздел [Управление владельцами пакетов на веб-сайте nuget.org](../create-packages/publish-a-package.md#managing-package-owners-on-nugetorg).

**Что делать с владельцем пакета, который нарушает условия лицензии на мое программное обеспечение?**

В рамках сообщества NuGet мы пропагандируем тесное сотрудничество по вопросам разрешения любых разногласий, которые могут возникать между владельцами пакетов и другого программного обеспечения. Прежде чем обращаться к администраторам nuget.org, мы рекомендуем воспользоваться [процессом разрешения споров](../policies/dispute-resolution.md).

**Рекомендуется ли загружать тестовые пакеты на веб-сайт nuget.org?**

В целях тестирования вы можете использовать веб-сайт [int.nugettest.org](https://int.nugettest.org) или альтернативные общедоступные серверы NuGet, такие как [myget.org](https://myget.org) или [Azure DevOps](https://blogs.msdn.microsoft.com/visualstudioalm/2015/08/27/announcing-package-management-support-for-vsotfs/).

Обратите внимание, что отправленные на веб-сайт int.nugettest.org пакеты могут не сохраняться.

**Каков максимальный размер пакетов, загружаемых на веб-сайт nuget.org?**

На веб-сайт nuget.org можно загружать пакеты размером до 250 МБ, однако мы рекомендуем по возможности не создавать пакеты размером более 1 МБ и использовать зависимости для установления связей между пакетами. Чтобы избежать конфликтов, рекомендуется включать в пакет только одну сборку.

NuGet использует для скачивания пакетов протокол HTTP, поэтому для крупных пакетов повышается вероятность сбоев при установке.

Вы можете использовать общие зависимости между несколькими пакетами, уменьшая общий размер скачиваемых клиентами пакетов NuGet.

В большинстве случаев зависимости являются статическими и никогда не изменяются. При исправлении ошибок в коде обновление зависимостей может не требоваться. Если вы объединяете зависимости в пакет, в конечном итоге вам придется каждый раз выполнять повторную доставку пакетов большого размера. Разбивая пакеты NuGet на взаимосвязанные зависимости, вы реализуете более детализированный процесс обновления пакетов для клиентов.

## <a name="nugetorg-not-accessible"></a>Отсутствие доступа к nuget.org

**Почему я не могу скачать пакеты с веб-сайта nuget.org или загрузить их на него?**

Во-первых, убедитесь, что вы используете последние версии NuGet. Если при работе такой версии продолжают возникать ошибки, [обратитесь в службу поддержки](https://www.nuget.org/policies/Contact) и предоставьте нам дополнительные сведения для устранения неполадок, в том числе следующие:

- Версия NuGet, которую вы используете
- Источники пакетов, которые вы используете
- Журнал восстановления с подробным уровнем детализации
- Данные трассировки MTR или Fiddler (см. ниже)
- Ваш географический регион
- Защищен ли компьютер прокси-сервером или брандмауэром?
- Расположен ли компьютер в центре обработки данных поставщика облачных служб (Azure, AWS и т. п.)? Если это так, укажите имя поставщика и регион.

*Получение трассировки MTR:*

- Скачайте WinMTR из [http://winmtr.net/download/](http://winmtr.net/).
- Введите имя узла `api.nuget.org` и щелкните **Пуск**.
- Дождитесь, пока значение в столбце **Отправлено** превысит 100.

    ![Получение трассировки MTR](media/mtr.png)

- Скопируйте текст в буфер обмена.

*Получение трассировки Fiddler:*

- Установите последнюю версию [Fiddler](http://www.telerik.com/download/fiddler).
- Запустите Fiddler и отключите запись трафика в меню **Файл > Запись трафика**.
- Удалите все сеансы (выделите все элементы в списке и нажмите клавишу **Delete**).
- Настройте Fiddler для записи трафика HTTPS, установив флажок **Расшифровывать трафик HTTPS** на вкладке **HTTPS** в меню **Сервис > Параметры Fiddler...**
- Закройте Visual Studio.
- Включите меню **Файл > Запись трафика**.
- Запустите исполняемый файл Visual Studio или nuget.exe и выполните действия, которые не получились ранее. Трафик, сформированный этими действиями, будет показан в Fiddler.
- После выполнения нужных действий выберите **Файл > Сохранить > Все сеансы**, чтобы сохранить записанные сеансы.

Примечание. Для маршрутизации трафика NuGet через Fiddler может потребоваться присвоить переменной среды `HTTP_PROXY` значение `http://127.0.0.1:8888`.

Если этот способ не помогает, попробуйте советы, приведенные в этой [статье на веб-сайте StackOverflow](http://stackoverflow.com/questions/21049908/using-fiddler-to-sniff-visual-studio-2013-requests-proxy-firewall).

## <a name="what-is-the-api-endpoint-for-nugetorg"></a>Какая конечная точка API нужна для nuget.org?

Чтобы использовать nuget.org в качестве репозитория пакетов в клиентах NuGet, вам нужна следующая конечная точка API версии 3: 

**`https://api.nuget.org/v3/index.json`**

Предыдущие версии клиентов по-прежнему могут использовать протокол версии 2 для доступа к nuget.org. Однако обратите внимание, что клиенты NuGet версии 3.0 и выше будут работать с протоколом версии 2 медленнее и с меньшей надежностью:

`https://www.nuget.org/api/v2` (Не рекомендуется!!!) **Примечание**. Для наилучшей надежности используйте "www.".

## <a name="nugetorg-account-management"></a>Управление учетной записью nuget.org

### <a name="how-to-create-a-new-nugetorg-account"></a>Создание учетной записи nuget.org

Чтобы создать учетную запись nuget.org, нужно иметь личную учетную запись Майкрософт (MSA) или учетную запись Azure Active Directory (AAD). Если у вас нет такой учетной записи, можете [создать](https://signup.live.com) ее. Если у вас есть учетная запись MSA или AAD, выполните указанные ниже действия.
1. Перейдите на [страницу входа на сайт nuget.org](https://www.nuget.org/users/account/LogOn).
1. Нажмите кнопку **Вход с помощью учетной записи Майкрософт**.
1. Введите данные своей учетной записи MSA/AAD.
1. Примите разрешения, которые требуется предоставить приложению *NuGet.org*.
1. Вы будете зарегистрированы на сайте nuget.org и получите запрос на ввод имени пользователя.
1. Укажите имя пользователя в поле ввода. Обратите внимание, что имя пользователя **вводится** с учетом регистра и не может быть изменено/переименовано позднее.
1. Нажмите кнопку **Регистрация**.

Теперь у вас есть учетная запись nuget.org. Управлять учетными записями можно на странице [параметров учетной записи](https://www.nuget.org/account).

### <a name="how-to-recover-nugetorg-password-login"></a>Как восстановить имя входа по паролю nuget.org?

Обратите внимание, что [использование имени входа по паролю nuget.org было прекращено](https://blog.nuget.org/20180515/NuGet.org-will-only-support-MSA-AAD-starting-June.html). Теперь единственным способом входа на сайт nuget.org является личная учетная запись Майкрософт (MSA) или учетная запись Azure Active Directory (AAD). Однако если вам не удается получить доступ к соответствующей учетной записи MSA/AAD на сайте nuget.org, для ее восстановления может потребоваться имя входа по паролю. В этом случае выполните указанные ниже действия.
- **Требование:** вам потребуется доступ к электронной почте, связанной с учетной записью, для которой нужно восстановить пароль.
- Перейдите на [страницу "Забыли пароль"](https://www.nuget.org/account/ForgotPassword).
- Введите адрес **электронной почты**, сопоставленный с учетной записью nuget.org, которую нужно восстановить.
- Нажмите кнопку **Отправить**.
- Вы получите на указанный адрес электронной почты сообщение со ссылкой для сброса пароля. Щелкните эту ссылку и задайте новый пароль. Если не удается найти сообщение, проверьте папку с нежелательной почтой.
- После этого вы можете войти в NuGet с помощью имени пользователя и пароля.
- Чтобы войти в систему с помощью имени пользователя и пароля, используйте ссылку **Sign in using Nuget.org account** (Войти с помощью учетной записи Nuget.org) на [странице входа на сайт nuget.org](https://www.nuget.org/users/account/LogOn).

### <a name="which-microsoft-account-is-linked-to-my-nugetorg-account"></a>Какая учетная запись Майкрософт связана с моей учетной записью nuget.org?

Если вы забыли, какая учетная запись Майкрософт сопоставлена с вашей учетной записью nuget.org, выполните указанные ниже действия для получения помощи.
1. Перейдите на [страницу входа на сайт nuget.org](https://www.nuget.org/users/account/LogOn) и щелкните ссылку **Need assistance signing?** (Нужна помощь со входом?).
1. Отображается всплывающее окно для оказания помощи. Выполните действия, указанные в этом диалоговом окне, чтобы узнать, какая учетная запись Майкрософт сопоставлена с вашей учетной записью nuget.org.

### <a name="how-to-change-the-microsoft-account-i-use-for-nugetorg-login"></a>Как изменить учетную запись Майкрософт, используемую для входа на сайт nuget.org?
Если вы хотите изменить учетную запись Майкрософт для пользователя nuget.org, выполните указанные ниже действия. Предположим, что с вашей учетной записью nuget.org с именем пользователя `MyNuGetAccount` сопоставлена учетная запись Майкрософт с адресом электронной почты `account1@outlook.com`. Вы хотите изменить имя входа на другую учетную запись Майкрософт с адресом электронной почты `account2@outlook.com`
1. Выполните вход с помощью **привязанной в данный момент учетной записи Майкрософт**, т. е. `account1@outlook.com`, на [странице входа](https://www.nuget.org/users/account/LogOn) после нажатия кнопки **Вход с помощью учетной записи Майкрософт**.
1. После входа перейдите на страницу [параметров учетной записи](https://www.nuget.org/account).
1. Разверните раздел **Login Account** (Учетная запись входа). Нажмите кнопку **Изменить учетную запись**.
1. Вы будете перенаправлены на страницу входа Майкрософт. Выполните вход с использованием учетной записи, которую вы хотите сопоставить, например, `account2@outlook.com`. **Примечание**. При входе может потребоваться щелкнуть элемент **Sign out and sign in with different account** (Выйти и войти с другой учетной записью), чтобы иметь возможность входа в систему с помощью другой учетной записи Майкрософт.
1. Если появится сообщение об ошибке, аналогичное приведенному ниже, см. раздел [Учетная запись Майкрософт связана с другой учетной записью nuget.org](#microsoft-account-is-linked-with-another-nugetorg-account) для получения дополнительных сведений.
    >_Failed to update the Microsoft account with "account2 <account2@outlook.com>". This could happen if it is already linked to another NuGet account. Contact support for more information._ (Не удалось обновить учетную запись Майкрософт с использованием второй учетной записи. Это могло произойти, если она уже связана с другой учетной записью NuGet. Для получения дополнительной информации обратитесь в службу поддержки.)

1. После успешного входа с использованием второй учетной записи вы будете перенаправлены обратно на страницу своей учетной записи nuget.org и увидите, что для входа привязана новая учетная запись Майкрософт. Теперь вам следует использовать эту учетную запись при входе на сайт nuget.org.

### <a name="microsoft-account-is-linked-with-another-nugetorg-account"></a>Учетная запись Майкрософт связана с другой учетной записью nuget.org

Если вы попытались изменить учетную имя входа Майкрософт и столкнулись со следующей ошибкой:
> _Failed to update the Microsoft account with "account2 <account2@outlook.com>". This could happen if it is already linked to another NuGet account. Contact support for more information._ (Не удалось обновить учетную запись Майкрософт с использованием второй учетной записи. Это могло произойти, если она уже связана с другой учетной записью NuGet. Для получения дополнительной информации обратитесь в службу поддержки.)

Предположим, что вы пытались изменить имя входа учетной записи Майкрософт с `account1@outlook.com` для пользователя nuget.org с именем пользователя `MyNuGetAccount1` на другую учетную запись Майкрософт с адресом электронной почты `account2@outlook.com`. И при этом возникла указанная выше ошибка.

**Что означает указанная выше ошибка?**

Она означает, что имеется другая учетная запись nuget.org, связанная с той учетной записью Майкрософт, на которую вы пытаетесь переключиться. Например, в примере выше учетная запись Майкрософт с адресом электронной почты `<account2@outlook.com>` связана с другой учетной записью nuget.org, например, с именем пользователя `MyNuGetAccount2`.

Вы не можете изменить связанное имя входа с учетной записью Майкрософт, которая сопоставлена с другой учетной записью nuget.org.

**Я помню, что у меня была другая учетная запись nuget.org, как выяснить, что это за учетная запись?**

Выполните вход с помощью второй учетной записи Майкрософт на [странице входа](https://www.nuget.org/users/account/LogOn?returnUrl=%2F# "страница входа"). При этом вы войдете в учетную запись nuget.org, которая сейчас сопоставлена со второй учетной записью Майкрософт. После этого вы сможете просмотреть отправленные пакеты и управлять этой учетной записью.

**Меня не волнует эта вторая учетная запись nuget.org, мне нужно сменить имя входа для первой учетной записи nuget.org со второй учетной записью Майкрософт. Что делать?**

Если вас не волнует вторая учетная запись nuget.org и вы хотите повторно использовать связанную учетную запись Майкрософт с адресом электронной почты `account2@outlook.com`. 

Вы можете отменить сопоставление между учетной записью Майкрософт и учетной записью nuget.org, удалив последнюю.
1. Выполните действия по [удалению пользователя](#how-to-delete-my-nugetorg-account) для второй учетной записи nuget.org `MyNuGetAccount2`. 
1. После удаления этой учетной записи вы можете повторить процедуру для [смены имени входа учетной записи Майкрософт](#how-to-change-the-microsoft-account-i-use-for-nugetorg-login).

**Подождите, мне нужна и эта вторая учетная запись. Я не хочу потерять ее, но хочу изменить соответствующие имена входа для первой учетной записи.**

Вам потребуется создать или использовать третью учетную запись Майкрософт, например, с адресом электронной почты `account3@outlook.com`. 
1. Сначала нужно войти с помощью второй учетной записи Майкрософт `account2@outlook.com` на сайт nuget.org. Выполните указанные выше действия, чтобы изменить связанные имена входа и связать с этой учетной записью nuget.org третью учетную запись Майкрософт.
1. После этого вторая учетная запись Майкрософт с адресом электронной почты `account2@outlook.com` освобождается, что позволяет связать ее с первой учетной записью nuget.org `MyNuGetAccount1`. Выполните аналогичную процедуру, чтобы сменить имена входа Майкрософт на вторую учетную запись Майкрософт.

### <a name="signing-in-with-microsoft-account-shows-me-my-email-is-linked-to-another-microsoft-account"></a>При входе с использованием учетной записи Майкрософт выдается сообщение о том, что мой адрес электронной почты связан с другой учетной записью Майкрософт
Если вы пытались выполнить вход с помощью учетной записи Майкрософт, например, с адресом электронной почты `account1@outlook.com` и появилось сообщение об ошибке, аналогичное представленному ниже:
> _The account with email 'account1@outlook.com' is linked with another microsoft account._ (Учетная запись с указанным адресом электронной почты связана с другой учетной записью Майкрософт.)
>
> _If you would like to update the linked Microsoft account you can do so from the account settings page._ (Если вы хотите обновить связанную учетную запись Майкрософт, можете сделать это на странице параметров учетной записи.)

**Что означает указанная выше ошибка?**

При создании учетной записи на сайте nuget.org с ней связывается адрес электронной почты для связи. Обычно это тот же адрес, который используется для сопоставленной учетной записи Майкрософт. Однако можно указать другой адрес электронной почты для связи. Поэтому, технически, вы можете иметь другую учетную запись Майкрософт, например, с адресом `account2@outlook.com`, которая связана с учетной записью nuget.org, имеющей адрес электронной почты для связи `account1@outlook.com`.

Таким образом, указанная выше ошибка означает, что уже существует учетная запись nuget.org с адресом электронной почты для связи `account1@outlook.com`, однако она сопоставлена с другой учетной записью Майкрософт с адресом, **отличным от** `account1@outlook.com`.

**Как определить, какая учетная запись Майкрософт связана с этой учетной записью nuget.org?**

Вам следует использовать процедуру [помощи со входом](#which-microsoft-account-is-linked-to-my-nugetorg-account), чтобы выяснить, какая учетная запись Майкрософт связана учетной записью nuget.org с адресом электронной почты `account1@outlook.com`.

**Я хочу переопределить эту учетную запись моей учетной записью Майкрософт**

Выполните действия, описанные в разделе [Не удается использовать имя входа Майкрософт. Как восстановить мою учетную запись nuget.org](#unable-to-use-microsoft-login-how-do-i-recover-my-nugetorg-account), чтобы связать учетную запись Майкрософт с существующей учетной записью nuget.org.

### <a name="unable-to-use-microsoft-login-how-do-i-recover-my-nugetorg-account"></a>Не удается использовать имя входа Майкрософт. Как восстановить мою учетную запись nuget.org?

Если вы попытались воспользоваться [помощью со входом](#which-microsoft-account-is-linked-to-my-nugetorg-account) и не можете получить доступ к учетной записи Майкрософт, сопоставленной с вашей учетной записью nuget.org, выполните указанные ниже действия, чтобы связать новую учетную запись Майкрософт со своей учетной записью nuget.org.
1. **Требование**: вам потребуется доступ к учетной записи Майкрософт, которая не связана ни с какой существующей учетной записью nuget.org. Если у вас нет такой учетной записи, можете [создать](https://signup.live.com) ее.
2. Выполните [действия по восстановлению имени входа по паролю](#how-to-recover-nugetorg-password-login), а если оно у вас есть, пропустите это действие.
3. [Войдите на сайт nuget.org](https://www.nuget.org/users/account/LogOnNuGetAccount) с помощью имени пользователя/имени входа по паролю.
4. После входа отображается всплывающее диалоговое окно аналогичное приведенному ниже. Это диалоговое окно посвящено прекращению действия пароля.
5. **Примечание**. Игнорируйте инструкции по входу с помощью указанной учетной записи Майкрософт. Теперь можно связать учетную запись nuget.org с другим именем для входа Майкрософт.
6. Нажмите кнопку **Вход с помощью учетной записи Майкрософт** и войдите в систему с помощью доступной учетной записи Майкрософт, как указано в действии 1.
7. Теперь ваша учетная запись будет связана с новой учетной записью Майкрософт, которую в дальнейшем можно использовать для входа на сайт nuget.org.

    ![Диалоговое окно связывания учетной записи MSA](media/link-msa-dialog.png)

### <a name="how-to-transform-my-nugetorg-account-to-an-organization"></a>Как преобразовать учетную запись nuget.org в организацию?

Если вы хотите преобразовать учетную запись в организацию и эта учетная запись уже связана с именем входа для учетной записи Майкрософт, выполните действия, описанные в документации по [организациями на сайте nuget.org](https://docs.microsoft.com/en-us/nuget/reference/organizations-on-nuget-org).

Однако если учетная запись nuget.org не связана с учетной записью Майкрософт, можно выполнить указанные ниже действия, чтобы преобразовать эту учетную запись в организацию.
1. **Требование**: вам нужно иметь отдельную учетную запись, заранее созданную на сайте nuget.org, для использования в качестве администратора в учетной записи организации. Если у вас ее нет, [создайте учетную запись nuget.org](#how-to-create-a-nugetorg-account).
2. Выполните [действия по восстановлению имени входа по паролю](#how-to-recover-nugetorg-password-login) для своей учетной записи nuget.org, если у вас его нет, в противном случае пропустите это действие.
3. [Войдите на сайт nuget.org](https://www.nuget.org/users/account/LogOnNuGetAccount) с помощью имени пользователя/имени входа по паролю.
4. После входа отображается всплывающее диалоговое окно аналогичное приведенному ниже. Это диалоговое окно посвящено прекращению действия пароля. 
    > [!Important]
    > Пропустите это диалоговое окно, **не** нажимая кнопку **Вход с помощью учетной записи Майкрософт**.

5. Перейдите по адресу [https://www.nuget.org/account/transform](https://www.nuget.org/account/transform). Это позволит вам преобразовать учетную запись nuget.org в организацию без связывания с учетной записью Майкрософт.
6. Укажите имя пользователя администратора для своей личной учетной записи nuget.org или учетной записи, созданной в действии 1.
7. Следуйте инструкциям для завершения преобразования этой учетной записи в организацию.

    ![Диалоговое окно связывания учетной записи MSA](media/link-msa-dialog.png)

### <a name="nugetorg-login-issues-for-aad-accounts-with-unmanaged-tenant"></a>Проблемы со входом на сайт nuget.org login для учетных записей AAD с неуправляемым клиентом?

Если при входе с использованием домена учетной записи электронной почты (@yourdomain.com) выводится следующее сообщение об ошибке, см. указанные ниже действия по восстановлению учетной записи nuget.org.

<p align="center">
    <img src="media/unmanaged-aad-tenant.png" />
</p>

**Что такое неуправляемое состояние при входе? И почему оно возникает сейчас?** 

Вероятно, ваша учетная запись была ранее зарегистрирована в качестве личной учетной записи Майкрософт и нормально работала в этом качестве, однако теперь она была зарегистрирована в качестве "неуправляемого" клиента в Azure Active Directory (служба идентификации, используемая нами для проверки подлинности учетных записей Майкрософт). 

Это могло произойти, если вы или другой сотрудник из вашей организации (с адресом электронной почты @yourdomain.com) зарегистрировались в одной из служб интеграции AAD или выполнили [самостоятельную регистрацию для Azure Active Directory](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/directory-self-service-signup), что создает такого "неуправляемого" клиента для используемого домена учетной записи Майкрософт (в вашем случае @yourdomain.com). 

**Что можно сделать для восстановления учетной записи?**

Сейчас у нас (nuget.org) не существует способа проверки подлинности учетных записей с такими "неуправляемыми" клиентами в Azure Active Directory. Мы стараемся найти оптимальный способ проверки подлинности таких учетных записей.

Если вы хотите войти на сайт nuget.org с помощью учетной записи Майкрософт (@yourdomain.com), вы (или администратор в вашей организации) должны затребовать владение AAD, выполнив проверку DNS для проверки подлинности пользователей с адресом электронной почты "@yourdomain.com". Выполните действия по [перехвату администратором доменов](https://docs.microsoft.com/en-us/azure/active-directory/users-groups-roles/domains-admin-takeover), описанные для Azure Active Directory. После этого должен начать работать обычный вход.

**Я не хочу делать все это, как еще можно восстановить учетную запись?**

Вы можете [создать](https://www.microsoft.com/en-us/account) учетную запись Майкрософт (с адресом электронной почты, который **не** связан с @yourdomain.com). Выполните действия, указанные в разделе [об восстановлении учетной записи nuget.org](#unable-to-use-microsoft-login-how-do-i-recover-my-nugetorg-account).

### <a name="how-do-i-change-my-nugetorg-account-username"></a>Как изменить мое имя пользователя учетной записи nuget.org?

Вы не можете сделать это. В целях соблюдения политики мы пока не позволяем менять имена пользователей. Единственный способ сменить имя пользователя — это создать другую учетную запись с требуемым именем. Мы рекомендуем удалить существующую учетную запись, прежде чем создавать новую, в противном случае вы не сможете повторно использовать зарегистрированную учетную запись Майкрософт.
> [!Important]
> При удалении пользователя все равно **резервируется** `username`. Вы не сможете повторно использовать то же имя пользователя, **включая варианты с измененным регистром**. Например, если вы создали пользователя с именем пользователя `mycoolname` и вы хотите изменить его на `MyCoolName` (смена регистра), это будет невозможно после удаления пользователя.

Выполните действия, описанные в разделе об [удалении учетной записи nuget.org](#how-to-delete-my-nugetorg-account) и [зарегистрируйте новую учетную запись](#how-to-create-a-new-nugetorg-account) с правильными именем пользователя.

### <a name="how-to-delete-my-nugetorg-account"></a>Удаление учетной записи nuget.org

При удалении учетной записи мы рекомендуем вам передать права владения на все пакеты, для которых вы являетесь единственным владельцем. Дополнительные сведения см. в разделе об [управлении владельцами пакетов](https://docs.microsoft.com/en-us/nuget/create-packages/publish-a-package#managing-package-owners-on-nugetorg). Это также поможет нам ускорить обработку вашего запроса.

> [!Important]
> Удаление пользователя приведет к следующему:
>  1. Отмена связанных ключей API. 
>  2. Удаление учетной записи в качестве владельца для всех дочерних пакетов.
>  3. Отмена связей для всех ранее существовавших резервирований префикса идентификатора для этой учетной записи.
>  4. Удаление учетной записи как члена любых организаций.
>  5. Ваше имя пользователя будет зарезервировано, и никто не сможет использовать его повторно без нашего разрешения.

Выполните указанные ниже действия, чтобы продолжить удаление учетной записи.
1. [Войдите на сайт nuget.org](https://www.nuget.org/users/account/LogOn) с помощью учетной записи, которую требуется удалить.
2. Щелкните этот URL-адрес: [https://www.nuget.org/account/delete](https://www.nuget.org/account/delete) и выполните действия для отправки запроса на удаление учетной записи.

Наша служба поддержки пользователей обработает этот запрос и удалит учетную запись.
