---
title: Команда восстановления интерфейса командной строки NuGet
description: Справочник по команде NuGet. exe Restore
author: karann-msft
ms.author: karann
ms.date: 01/18/2018
ms.topic: reference
ms.openlocfilehash: 211f24ff67c06da00d6a014e679cc422d493d6d5
ms.sourcegitcommit: 9803981c90a1ed954dc11ed71731264c0e75ea0a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/12/2019
ms.locfileid: "68959745"
---
# <a name="restore-command-nuget-cli"></a>команда Restore (интерфейс командной строки NuGet)

Область **применения:** &bullet; **Поддерживаемые версии** потребления пакетов: 2.7+

Скачивает и устанавливает все пакеты, `packages` отсутствующие в папке. При использовании с NuGet 4.0 + и форматом PackageReference при необходимости создает `<project>.nuget.props` файл `obj` в папке. (Файл можно опустить из системы управления версиями.)

В Mac OSX и Linux с интерфейсом командной строки в Mono восстановление пакетов с помощью PackageReference не поддерживается.

## <a name="usage"></a>Использование

```cli
nuget restore <projectPath> [options]
```

где `<projectPath>` указывает расположение решения `packages.config` или файла. Подробные сведения о поведении см. в разделе [Примечания](#remarks) ниже.

## <a name="options"></a>Параметры

| Параметр | Описание |
| --- | --- |
| ConfigFile | Файл конфигурации NuGet, который необходимо применить. Если не указано, `%AppData%\NuGet\NuGet.Config` используется (Windows) `~/.nuget/NuGet/NuGet.Config` или (Mac/Linux).|
| директдовнлоад | *(4.0 +)* Скачивает пакеты напрямую, не заполняя кэши двоичными файлами или метаданными. |
| DisableParallelProcessing | Отключает восстановление нескольких пакетов параллельно. |
| фаллбакксаурце | *(3.2 +)* Список источников пакетов, используемых в качестве резервных при условии, что пакет не найден в основном источнике или по умолчанию. Используйте точку с запятой для разделения записей списка. |
| форцеенглишаутпут | *(3.5 +)* Принудительное выполнение NuGet. exe с использованием инвариантного языка и региональных параметров, основанных на английском языке. |
| Help | Отображает справочные сведения для команды. |
| мсбуилдпас | *(4.0 +)* Указывает путь MSBuild для использования с командой, который имеет приоритет над `-MSBuildVersion`. |
| мсбуилдверсион | *(3.2 +)* Указывает версию MSBuild, которая будет использоваться с этой командой. Поддерживаемые значения: 4, 12, 14, 15,1, 15,3, 15,4, 15,5, 15,6, 15,7, 15,8, 15,9. По умолчанию в пути выбирается MSBuild, в противном случае — по умолчанию — самая высокая установленная версия MSBuild. |
| NoCache | Предотвращает использование кэшированных пакетов NuGet. См. раздел [Управление глобальными пакетами и папками кэша](../../consume-packages/managing-the-global-packages-and-cache-folders.md). |
| NonInteractive | Подавляет запросы на ввод или подтверждение пользователя. |
| OutputDirectory | Указывает папку, в которой устанавливаются пакеты. Если папка не указана, используется текущая папка. Требуется при восстановлении с `packages.config` файлом, `PackagesDirectory` если `SolutionDirectory` не используется или.|
| паккажесавемоде | Указывает типы файлов, которые необходимо сохранить после установки пакета: один из `nuspec`, `nupkg`или `nuspec;nupkg`. |
| паккажесдиректори | Эквивалентно `OutputDirectory`. Требуется при восстановлении с `packages.config` файлом, `OutputDirectory` если `SolutionDirectory` не используется или. |
| Project2ProjectTimeOut | Время ожидания в секундах для разрешения ссылок между проектами. |
| Рекурсивного | *(4.0 +)* Восстанавливает все проекты ссылок для проектов UWP и .NET Core. Не применяется к проектам с `packages.config`помощью. |
| рекуиреконсент | Проверяет, что восстановление пакетов включено перед загрузкой и установкой пакетов. Дополнительные сведения см. в разделе [восстановление пакетов](../../consume-packages/package-restore.md). |
| солутиондиректори | Указывает папку решения. Недопустимый при восстановлении пакетов для решения. Требуется при восстановлении с `packages.config` файлом, `PackagesDirectory` если `OutputDirectory` не используется или. |
| Source | Указывает список источников пакетов (в виде URL-адресов), используемых для восстановления. Если этот параметр не указан, команда использует источники, предоставленные в файлах конфигурации, см. раздел [Настройка поведения NuGet](../../consume-packages/configuring-nuget-behavior.md). Используйте точку с запятой для разделения записей списка. |
| Verbosity | Задает объем сведений, отображаемых в выходных данных: *нормальный*, *тихий*, *подробный*. |

См. также [переменные среды](cli-ref-environment-variables.md)

## <a name="remarks"></a>Примечания

Команда Restore выполняет следующие действия.

1. Определите режим работы команды Restore.

   | Тип файла projectPath | Поведение |
   | --- | --- |
   | Решение (папка) | NuGet ищет `.sln` файл и использует его, если он найден; в противном случае выдает ошибку. `(SolutionDir)\.nuget`используется в качестве начальной папки. |
   | `.sln`File | Восстановление пакетов, идентифицируемых решением; выдает ошибку, `-SolutionDirectory` если используется. `$(SolutionDir)\.nuget`используется в качестве начальной папки. |
   | `packages.config`или файл проекта | Восстановление пакетов, перечисленных в файле, разрешение и установку зависимостей. |
   | Другой тип файла | Предполагается, что файл является `.sln` файлом, как показано выше. Если это не решение, NuGet выдает ошибку. |
   | (не указано projectPath) | <ul><li>NuGet ищет файлы решений в текущей папке. Если найден один файл, то он используется для восстановления пакетов. Если найдено несколько решений, NuGet выдает ошибку.</li><li>Если файлы решения отсутствуют, NuGet ищет `packages.config` и использует их для восстановления пакетов.</li><li>Если решение или `packages.config` файл не найдены, NuGet выдает ошибку.</ul> |

2. Определите папку Packages, используя следующий порядок приоритета (NuGet выдает ошибку, если ни одна из этих папок не найдена):

    - Папка, указанная `-PackagesDirectory`в параметре.
    - `repositoryPath` Значение в`Nuget.Config`
    - Папка, указанная с помощью`-SolutionDirectory`
    - `$(SolutionDir)\packages`

3. При восстановлении пакетов для решения NuGet выполняет следующие действия:
    - Загружает файл решения.
    - Восстанавливает пакеты уровня решения, `$(SolutionDir)\.nuget\packages.config` `packages` перечисленные в папке.
    - Восстановление пакетов, перечисленных `$(ProjectDir)\packages.config` в папке `packages` , в папку. Для каждого указанного пакета восстановите пакет параллельно, `-DisableParallelProcessing` если не указано иное.

## <a name="examples"></a>Примеры

```cli
# Restore packages for a solution file
nuget restore a.sln

# Restore packages for a solution file, using MSBuild version 14.0 to load the solution and its project(s)
nuget restore a.sln -MSBuildVersion 14

# Restore packages for a project's packages.config file, with the packages folder at the parent
nuget restore proj1\packages.config -PackagesDirectory ..\packages

# Restore packages for the solution in the current folder, specifying package sources
nuget restore -source "https://api.nuget.org/v3/index.json;https://www.myget.org/F/nuget"
```
