---
title: Рекомендации по обеспечению безопасности для цепочки поставок программного обеспечения
description: Рекомендации по обеспечению безопасности цепочки поставок программного обеспечения с помощью NuGet и GitHub.
author: JonDouglas
ms.author: jodou
ms.date: 02/08/2021
ms.topic: conceptual
ms.openlocfilehash: 4575d4779ed90150cec667489c85875b7fb87a8d
ms.sourcegitcommit: 5f706c62c97b78bbe3d8c7e95659976535fe486f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2021
ms.locfileid: "122726981"
---
# <a name="best-practices-for-a-secure-software-supply-chain"></a>Рекомендации по обеспечению безопасности для цепочки поставок программного обеспечения

Открытый код можно встретить повсюду. Его можно найти во многих проприетарных базах кода и проектах сообщества. Для организаций и отдельных лиц вопрос уже не в том, используют ли они открытый код, а в том, какой именно открытый код и в каком объеме.

Если вы не знаете, что находится в вашей цепочке поставок программного обеспечения, уязвимость в одной из ваших зависимостей, находящейся выше по цепочке, может стать фатальной и привести к тому, что вы или ваши клиенты будут скомпрометированы. В этом документе подробно рассматривается понятие "цепочка поставок программного обеспечения" и ее значение и приводятся рекомендации по защите цепочки поставок вашего проекта.

![The State of the Octoverse 2020 — открытый код](media/opensource-percent.png)

## <a name="dependencies"></a>Зависимости 

Термин "цепочка поставок программного обеспечения" охватывает все компоненты, входящие в состав вашего программного обеспечения, и их источники. Это зависимости и свойства зависимостей, от которых зависит ваша цепочка поставок программного обеспечения. Зависимость — это то, что необходимо для выполнения программы. Это может быть код, двоичные файлы или другие компоненты, а также их источники, например репозиторий или диспетчер пакетов.

В зависимость включается информация о том, кто написал код, когда он был добавлен, как он был проверен на наличие проблем с безопасностью и известных уязвимостей, поддерживаемые версии, сведения о лицензиях и практически все, что связано с зависимостью в любой точке процесса.

Цепочка поставок также охватывает другие компоненты стека за рамками приложения, такие как сценарии сборки и упаковки или программное обеспечение, предоставляющее инфраструктуру, на основе которой работает ваше приложение.

## <a name="vulnerabilities"></a>Уязвимости

Сегодня зависимости программного обеспечения встречаются повсеместно. В проектах довольно часто используются сотни зависимостей с открытым кодом для функций, которые вам не приходится писать самостоятельно. Это может означать, что большая часть вашего приложения состоит из кода, написанного не вами. 

![The State of the Octoverse 2020 — зависимости](media/dependencies.png)

Вы не можете контролировать возможные уязвимости в зависимостях сторонних разработчиков и в зависимостях с открытым кодом так же строго, как ваш собственный код, что может привести к потенциальным угрозам безопасности в цепочке поставок.

Если в одной из этих зависимостей есть уязвимость, ваше программное обеспечение также может стать уязвимым. И это может вызывать тревогу, так как ваши зависимости могут быть изменены даже без вашего ведома. Даже если сейчас в зависимости есть уязвимость, которую нельзя использовать, она может стать доступной для использования в будущем. 

Возможность использования результатов работы нескольких тысяч разработчиков программ и авторов библиотек с открытым кодом означает, что тысячи незнакомых людей по сути дела могут вносить изменения прямо в ваш рабочий код. На ваш продукт в цепочке поставок программного обеспечения влияют уязвимости, которые не были устранены, безобидные ошибки и даже вредоносные атаки на зависимости.

## <a name="supply-chain-compromises"></a>Компрометация цепочки поставок

Традиционное определение цепочки поставок возникло в сфере производства. Цепочка поставок — это цепочка процессов, необходимых для создания и поставки чего-либо. Она включает планирование, поставку материалов, производство и розничную продажу. Цепочка поставок программного обеспечения похожа на цепочку поставок в сфере производства с той разницей, что вместо материалов в ней используется код. Вместо производства она включает разработку. Вместо добычи руды из недр земли она включает получение коммерческого или открытого кода от поставщиков, и в общем случае открытый код поступает из репозиториев. Добавление кода из репозитория означает, что ваш продукт зависит от этого кода.

Одним из примеров атаки на цепочку поставок программного обеспечения является ситуация, когда вредоносный код намеренно добавляется в зависимость, используя цепочку поставок этой зависимости, чтобы распространить вредоносный код жертвам атаки. Атаки на цепочки поставок происходят на самом деле. Существует множество методов атаки на цепочку поставок, от непосредственного добавления вредоносного кода от имени нового участника до получения контроля над учетной записью участника без ведома других пользователей и даже до компрометации ключа подписывания для распространения программного обеспечения, официально не являющегося частью зависимости.

Атака на цепочку поставок программного обеспечения сама по себе является редко является конечной целью. Скорее она дает злоумышленнику возможность добавления вредоносного кода или создания бэкдора для доступа в будущем.

![The State of the Octoverse 2020 — жизненный цикл уязвимости](media/vulnerability-lifecycle.png)

## <a name="unpatched-software"></a>Программное обеспечение, к которому не были применены исправления

Сегодня открытый код используется очень широко, и, скорее всего, он будет так же широко использоваться в будущем. Учитывая, что мы будем продолжать использовать программное обеспечение с открытым кодом, угрозой для безопасности цепочки поставок является программное обеспечение, к которому не применены исправления. Зная это, какие меры нужно предпринять, чтобы устранить риск наличия уязвимости в зависимости вашего проекта?

- **Познакомьтесь с тем, что находится в вашей среде.** Для этого необходимо определить все зависимости и все промежуточные зависимости вашего проекта и оценить риски этих зависимостей, например уязвимости или ограничения лицензирования.
- **Управляйте зависимостями.** При обнаружении новой уязвимости системы безопасности необходимо определить, затрагивает ли вас эта уязвимость, и если да, то установить последнюю версию программного обеспечения и доступные исправления для системы безопасности. Особенно важно отслеживать изменения, которые включают появление новых зависимостей, и регулярно выполнять аудит старых зависимостей.
- **Отслеживайте цепочку поставок.** Для этого выполняйте аудит средств контроля, используемых для управления зависимостями. Это позволит применить более строгие условия для ваших зависимостей.

![The State of the Octoverse 2020 — вспомогательные инструменты](media/advisories.png)

Мы расскажем о различных средствах и методах, предоставляемых NuGet и GitHub, которые можно использовать для устранения потенциальных рисков вашего проекта. 

## <a name="knowing-what-is-in-your-environment"></a>Ознакомление с тем, что находится в вашей среде

### <a name="nuget-dependency-graph"></a>Схема зависимостей NuGet

**📦 Пользователь пакета**

Просмотреть зависимости NuGet для проекта можно непосредственно в соответствующем файле проекта.

Обычно этот файл находится в одном из двух мест.

-   [`packages.config`](../reference/packages-config.md) — расположен в корневом каталоге проекта.
-   [`<PackageReference>`](../consume-packages/package-references-in-project-files.md) — расположен в файле проекта. 

В зависимости от того, какой метод используется для управления зависимостями NuGet, зависимости также можно просмотреть с помощью Visual Studio: непосредственно в [Обозревателе решений](/visualstudio/ide/solutions-and-projects-in-visual-studio#solution-explorer) или в [диспетчере пакетов NuGet](../consume-packages/install-use-packages-visual-studio.md).

Для сред CLI можно выполнить команду [`dotnet list package`](/dotnet/core/tools/dotnet-list-package) для получения списка зависимостей проекта или решения. 

Дополнительные сведения об управлении зависимостями NuGet см. в [следующей документации](../consume-packages/overview-and-workflow.md).

### <a name="github-dependency-graph"></a>Диаграмма зависимостей GitHub 

**📦 Пользователь пакета | 📦🖊 Автор пакета**

Схему зависимостей GitHub можно использовать для просмотра пакетов, от которых зависит ваш проект, и для просмотра репозиториев, которые зависят от вашего проекта. Это позволит найти и просмотреть все уязвимости, обнаруженные в зависимостях проекта.

Дополнительные сведения о зависимостях репозитория GitHub см. в [следующей документации](https://github.co/dependency-graph).

### <a name="dependency-versions"></a>Версии зависимостей

**📦 Пользователь пакета | 📦🖊 Автор пакета**

Чтобы обеспечить безопасность цепочки поставок зависимостей, необходимо регулярно обновлять все зависимости и инструменты до последних стабильных версий, так как эти версии часто содержат новейшие функции и исправления безопасности для известных уязвимостей. Ваши зависимости могут включать код, от которого вы зависите, двоичные файлы и инструменты, которые вы используете, а также другие компоненты. К ним может относиться следующее.

-   [Visual Studio](https://visualstudio.microsoft.com/downloads/)
-   [Пакет SDK и среда выполнения .NET](https://dotnet.microsoft.com/download)
-   [NuGet](https://www.nuget.org/downloads)
-   [Пакеты NuGet](../consume-packages/reinstalling-and-updating-packages.md)

## <a name="manage-your-dependencies"></a>Управление зависимостями

### <a name="nuget-deprecated-and-vulnerable-dependencies"></a>Нерекомендуемые зависимости NuGet и зависимости NuGet, содержащие уязвимости

**📦 Пользователь пакета | 📦🖊 Автор пакета**

С помощью [dotnet CLI](/dotnet/core/tools/dotnet-list-package) можно получить список всех известных нерекомендуемых зависимостей и зависимостей, содержащих уязвимости, в вашем проекте или решении. Вы можете использовать команду `dotnet list package --deprecated` или `dotnet list package --vulnerable` для получения списка всех известных нерекомендуемых зависимостей и зависимостей, содержащих уязвимости.

### <a name="github-vulnerable-dependencies"></a>Зависимости GitHub, содержащие уязвимости

**📦 Пользователь пакета | 📦🖊 Автор пакета**

Если проект размещен на сайте GitHub, вы можете использовать [систему GitHub Security](https://docs.github.com/en/free-pro-team@latest/github/finding-security-vulnerabilities-and-errors-in-your-code/automatically-scanning-your-code-for-vulnerabilities-and-errors), чтобы найти уязвимости безопасности и ошибки в вашем проекте, и Dependabot исправит их, открыв запрос на вытягивание для вашей базы кода. 

Перехват зависимостей, содержащих уязвимости, до их появления является одной из целей подхода ["Сдвиг влево"](https://en.wikipedia.org/wiki/Shift-left_testing). Возможность получить сведения о зависимостях, таких как лицензия, промежуточные зависимости и возраст зависимостей, поможет вам сделать именно это.

Дополнительные сведения об оповещениях и обновлениях для системы безопасности Dependabot см. в [следующей документации](https://docs.github.com/en/github/managing-security-vulnerabilities/about-alerts-for-vulnerable-dependencies).

### <a name="nuget-feeds"></a>Веб-каналы NuGet

**📦 Пользователь пакета**

При использовании нескольких общедоступных и частных веб-каналов исходного кода NuGet пакет можно скачать из любого веб-канала. Чтобы гарантировать, что сборка является предсказуемой и защищенной от известных атак, таких как [Путаница зависимостей](https://medium.com/@alex.birsan/dependency-confusion-4a5d60fec610), необходимо знать, из каких конкретных веб-каналов поступают ваши пакеты. Для защиты можно использовать один веб-канал или частный веб-канал с возможностями восходящего потока.

Дополнительные сведения о защите веб-каналов пакета см. в разделе [Три способа снижения риска при использовании частных веб-каналов пакетов](https://azure.microsoft.com/resources/3-ways-to-mitigate-risk-using-private-package-feeds/).

### <a name="client-trust-policies"></a>Политики доверия клиентов

**📦 Пользователь пакета**

Существуют политики, которые можно принять и которые требуют подписывания пакетов, используемых вами. Это позволяет доверять автору пакета при условии, что пакет подписан автором, или доверять пакету, если он принадлежит определенному пользователю или учетной записи, которая соответствует репозиторию, подписанному NuGet.org.

Сведения о настройке политик доверия клиентов см. в [следующей документации](../consume-packages/installing-signed-packages.md).

### <a name="lock-files"></a>Файлы блокировки

**📦 Пользователь пакета**

В файлах блокировки хранится хэш содержимого пакета. Если хэш содержимого пакета, который необходимо установить, совпадает с хэшем в файле блокировки, это подтверждает воспроизводимость пакета.

Сведения о включении блокировки файлов см. в [следующей документации](../consume-packages/package-references-in-project-files.md#locking-dependencies).

## <a name="monitor-your-supply-chain"></a>Отслеживание цепочки поставок

### <a name="github-secret-scanning"></a>Проверка секрета GitHub

**📦🖊 Автор пакета**

GitHub проверяет репозитории на наличие ключей API NuGet, чтобы предотвратить неправомерное использование секретов, которые были зафиксированы случайно. 

Дополнительные сведения о проверке секретов см. в разделе [Проверка секретов](https://docs.github.com/en/github/administering-a-repository/about-secret-scanning).

### <a name="author-package-signing"></a>Подписывание пакета автором

**📦🖊 Автор пакета**

[Подписывание автором](../reference/signed-packages-reference.md) позволяет автору пакета создать отметку со своим удостоверением в пакете, а пользователю пакета — проверить, что пакет создан именно этим автором. Это защищает вас от неправомерного изменения содержимого пакета и служит единым источником истинности происхождения и подлинности пакета. Сочетание подписывания с политиками доверия клиентов позволяет проверить, что пакет создан указанным автором.

Чтобы подписать пакет от лица автора, см. раздел [Подписывание пакета](../create-packages/sign-a-package.md).

### <a name="two-factor-authentication-2fa"></a>Двухфакторная проверка подлинности (2FA)

**📦🖊 Автор пакета**

Включение двухфакторной проверки подлинности (2FA) позволяет добавить дополнительный уровень безопасности при [входе в учетную запись GitHub](https://docs.github.com/en/github/authenticating-to-github/securing-your-account-with-two-factor-authentication-2fa) или в [общедоступный репозиторий пакетов NuGet.org](../nuget-org/individual-accounts.md#enable-two-factor-authentication-2fa). Рекомендуется включить двухфакторную проверку подлинности для защиты учетной записи.

### <a name="package-id-prefix-reservation"></a>Резервирование префикса идентификатора пакета 

**📦🖊 Автор пакета**

Чтобы защитить удостоверение пакета, можно зарезервировать префикс идентификатора пакета с соответствующим пространством имен, чтобы связать пакет с соответствующим владельцем. Для этого префикс идентификатора пакета должен соответствовать [определенным критериям](../nuget-org/id-prefix-reservation.md#id-prefix-reservation-criteria). 

Дополнительные сведения о резервировании префиксов идентификаторов см. в разделе [Резервирование префикса идентификатора пакета](../nuget-org/id-prefix-reservation.md).

### <a name="deprecating-and-unlisting-a-vulnerable-package"></a>Объявление нерекомендуемым и удаление из списка пакета, содержащего уязвимости

**📦🖊 Автор пакета**

Если вы знаете, что созданный вами пакет содержит уязвимость, то для защиты экосистемы пакетов .NET необходимо предпринять все возможные меры для того, чтобы объявить пакет нерекомендуемым и удалить его из списка, чтобы этот пакет не отображался при поиске пакетов пользователями. Если вы используете пакет, который является нерекомендуемым и был удален из списка, следует перестать использовать этот пакет.

Сведения о том, как объявить пакет нерекомендуемым и удалить его из списка, см. в следующей документации по [объявлению пакетов нерекомендуемыми](../nuget-org/deprecate-packages.md) и [удалению пакетов из списка](../nuget-org/policies/deleting-packages.md#unlisting-a-package).

## <a name="summary"></a>Итоги

Цепочка поставок программного обеспечения — это все, что входит в ваш код и влияет на него. Несмотря на то что компрометация цепочек пакетов является реальностью и ее популярность растет, случаи такой компрометации все еще встречаются редко. Поэтому самыми важными мерами, которые вы можете предпринять для защиты цепочки поставок, являются **ознакомление с зависимостями, управление зависимостями** и **отслеживание цепочки поставок**.

Вы познакомились с различными методами, предоставляемыми NuGet и [GitHub](/learn/modules/maintain-secure-repository-github/) и используемыми для повышения эффективности при просмотре и отслеживании цепочки поставок, а также при управлении цепочкой поставок.

Дополнительные сведения о защите программного обеспечения во всем мире см. в [Отчете о безопасности The State of the Octoverse 2020 ](https://octoverse.github.com/static/github-octoverse-2020-security-report.pdf).
