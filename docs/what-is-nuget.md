---
title: Что такое NuGet и для чего он нужен
description: Комплексное введение о том, что такое NuGet и для чего он нужен
author: karann-msft
ms.author: karann
ms.date: 05/24/2019
ms.topic: overview
ms.openlocfilehash: f16cc6f66bc12727a4ec8eb5da4ff44a9eeb1764
ms.sourcegitcommit: ba8ad1bd13a4bba3df94374e34e20c425a05af2f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2019
ms.locfileid: "68833328"
---
# <a name="an-introduction-to-nuget"></a><span data-ttu-id="a5f3c-103">Введение в NuGet</span><span class="sxs-lookup"><span data-stu-id="a5f3c-103">An introduction to NuGet</span></span>

<span data-ttu-id="a5f3c-104">Ключевой инструмент для любой современной платформы разработки — это механизм, с помощью которого разработчики могут создавать, передавать друг другу и использовать полезный код.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-104">An essential tool for any modern development platform is a mechanism through which developers can create, share, and consume useful code.</span></span> <span data-ttu-id="a5f3c-105">Часто такой код распределен по "пакетам", включающим скомпилированный код (в виде библиотек DLL) и другое содержимое, необходимое использующим эти пакеты проектам.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-105">Often such code is bundled into "packages" that contain compiled code (as DLLs) along with other content needed in the projects that consume these packages.</span></span>

<span data-ttu-id="a5f3c-106">Для .NET (в том числе .NET Core) механизмом совместного использования кода, поддерживаемым Майкрософт, является **NuGet**, который определяет, как создаются, размещаются и используются пакеты для .NET, а также [предоставляет средства](install-nuget-client-tools.md) для каждой из этих ролей.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-106">For .NET (including .NET Core), the Microsoft-supported mechanism for sharing code is **NuGet**, which defines how packages for .NET are created, hosted, and consumed, and [provides the tools](install-nuget-client-tools.md) for each of those roles.</span></span>

<span data-ttu-id="a5f3c-107">Проще говоря, пакет NuGet представляет собой отдельный ZIP-файл с расширением `.nupkg`, который содержит скомпилированный код (DLL), другие файлы, связанные с этим кодом, и описательный манифест, включающий такие сведения, как номер версии пакета.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-107">Put simply, a NuGet package is a single ZIP file with the `.nupkg` extension that contains compiled code (DLLs), other files related to that code, and a descriptive manifest that includes information like the package's version number.</span></span> <span data-ttu-id="a5f3c-108">Разработчики, у которых есть код, к которому нужно предоставить общий доступ, создают пакеты и публикуют их на закрытых или открытых узлах.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-108">Developers with code to share create packages and publish them to a public or private host.</span></span> <span data-ttu-id="a5f3c-109">Потребители получают эти пакеты из соответствующих узлов, добавляют их в свои проекты, а затем вызывают функции пакета в коде своего проекта.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-109">Package consumers obtain those packages from suitable hosts, add them to their projects, and then call a package's functionality in their project code.</span></span> <span data-ttu-id="a5f3c-110">При этом NuGet сам обрабатывает все промежуточные данные.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-110">NuGet itself then handles all of the intermediate details.</span></span>

<span data-ttu-id="a5f3c-111">Так как NuGet поддерживает закрытые узлы наряду с открытым узлом nuget.org, с помощью пакетов NuGet вы можете делиться кодом, используемым в рамках организации или рабочей группы.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-111">Because NuGet supports private hosts alongside the public nuget.org host, you can use NuGet packages to share code that's exclusive to an organization or a work group.</span></span> <span data-ttu-id="a5f3c-112">Пакеты NuGet также являются удобным способом факторизовать свой код для использования только в собственных проектах.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-112">You can also use NuGet packages as a convenient way to factor your own code for use in nothing but your own projects.</span></span> <span data-ttu-id="a5f3c-113">Иными словами, пакет NuGet является совместно используемой единицей кода, однако не требует и не подразумевает какого-либо определенного способа предоставления общего доступа.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-113">In short, a NuGet package is a shareable unit of code, but does not require nor imply any particular means of sharing.</span></span>

## <a name="the-flow-of-packages-between-creators-hosts-and-consumers"></a><span data-ttu-id="a5f3c-114">Поток пакетов между создателями, узлами и потребителями</span><span class="sxs-lookup"><span data-stu-id="a5f3c-114">The flow of packages between creators, hosts, and consumers</span></span>

<span data-ttu-id="a5f3c-115">Выполняя роль общедоступного узла, NuGet обслуживает центральный репозиторий с более чем 100 000 уникальных пакетов на сайте [nuget.org](https://www.nuget.org). Ежедневно эти пакеты используют миллионы разработчиков .NET и .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-115">In its role as a public host, NuGet itself maintains the central repository of over 100,000 unique packages at [nuget.org](https://www.nuget.org). These packages are employed by millions of .NET/.NET Core developers every day.</span></span> <span data-ttu-id="a5f3c-116">NuGet также позволяет размещать пакеты в частном порядке в облаке (например, в Azure DevOps), в частной сети или даже в вашей локальной файловой системе.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-116">NuGet also enables you to host packages privately in the cloud (such as on Azure DevOps), on a private network, or even on just your local file system.</span></span> <span data-ttu-id="a5f3c-117">Таким образом эти пакеты доступны только тем разработчикам, у которых есть доступ к узлу, что позволяет сделать их доступными для отдельных групп потребителей.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-117">By doing so, those packages are available to only those developers that have access to the host, giving you the ability to make packages available to a specific group of consumers.</span></span> <span data-ttu-id="a5f3c-118">Эти возможности описаны в разделе [Размещение своих веб-каналов NuGet](hosting-packages/overview.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-118">The options are explained on [Hosting your own NuGet feeds](hosting-packages/overview.md).</span></span> <span data-ttu-id="a5f3c-119">С помощью параметров конфигурации можно также контролировать, какие узлы могут быть доступны любому компьютеру, тем самым гарантируя, что пакеты получают из определенных источников, а не из общего репозитория, такого как nuget.org.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-119">Through configuration options, you can also control exactly which hosts can be accessed by any given computer, thereby ensuring that packages are obtained from specific sources rather than a public repository like nuget.org.</span></span>

<span data-ttu-id="a5f3c-120">Независимо от своей природы, узел выступает в качестве точки подключения между *создателями* и *потребителями* пакета.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-120">Whatever its nature, a host serves as the point of connection between package *creators* and package *consumers*.</span></span> <span data-ttu-id="a5f3c-121">Создатели разрабатывают полезные пакеты NuGet и публикуют их на узле.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-121">Creators build useful NuGet packages and publish them to a host.</span></span> <span data-ttu-id="a5f3c-122">Потребители ищут полезные и совместимые пакеты на доступных узлах, скачивая эти пакеты и включая их в свои проекты.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-122">Consumers then search for useful and compatible packages on accessible hosts, downloading and including those packages in their projects.</span></span> <span data-ttu-id="a5f3c-123">После установки в проекте API пакеты становятся доступны остальной части кода проекта.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-123">Once installed in a project, the packages' APIs are available to the rest of the project code.</span></span>

![Связь между создателями, узлами и потребителями пакета](media/nuget-roles.png)

## <a name="package-targeting-compatibility"></a><span data-ttu-id="a5f3c-125">Совместимость пакета с разными целевыми платформами</span><span class="sxs-lookup"><span data-stu-id="a5f3c-125">Package targeting compatibility</span></span>

<span data-ttu-id="a5f3c-126">"Совместимый" пакет означает, что он содержит сборки, созданные по меньшей мере для одной целевой платформы .NET, совместимой с целевой платформой используемого проекта.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-126">A "compatible" package means that it contains assemblies built for at least one target .NET framework that's compatible with the consuming project's target framework.</span></span> <span data-ttu-id="a5f3c-127">Разработчики могут создавать пакеты, которые относятся к одной платформе, как и элементы управления универсальной платформы Windows (UWP), или они могут поддерживать более широкий набор целевых объектов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-127">Developers can create packages that are specific to one framework, as with UWP controls, or they can support a wider range of targets.</span></span> <span data-ttu-id="a5f3c-128">Для максимальной совместимости пакета разработчики используют версию [.NET Standard](/dotnet/standard/net-standard), которую поддерживают все проекты .NET и .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-128">To maximize a package's compatibility, developers target [.NET Standard](/dotnet/standard/net-standard), which all .NET and .NET Core projects can consume.</span></span> <span data-ttu-id="a5f3c-129">Это наиболее эффективное средство как для создателей, так и для потребителей, так как единый пакет (обычно содержащий единую сборку) подходит для всех потребляющих проектов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-129">This is the most efficient means for both creators and consumers, as a single package (usually containing a single assembly) works for all consuming projects.</span></span>

<span data-ttu-id="a5f3c-130">Разработчики пакетов, которым требуется API вне .NET Standard, с другой стороны, создают отдельные сборки для различных требуемых версий .NET Framework, которые они будут поддерживать, и включают все эти сборки в один пакет (который называется пакетом многоплатформенного нацеливания).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-130">Package developers who require APIs outside of .NET Standard, on the other hand, create separate assemblies for the different target frameworks they want to support and include all of those assemblies in the same package (which is called "multi-targeting").</span></span> <span data-ttu-id="a5f3c-131">Когда потребитель устанавливает такой пакет, NuGet извлекает только сборки, нужные в проекте.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-131">When a consumer installs such a package, NuGet extracts only those assemblies that are needed by the project.</span></span> <span data-ttu-id="a5f3c-132">Это сводит к минимуму занимаемое пакетом место в конечном приложении или сборках, создаваемых данным проектом.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-132">This minimizes the package's footprint in the final application and/or assemblies produced by that project.</span></span> <span data-ttu-id="a5f3c-133">Пакет настройки для различных версий, конечно, сложнее в обслуживании.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-133">A multi-targeting package is, of course, more difficult for its creator to maintain.</span></span>

> [!Note]
> <span data-ttu-id="a5f3c-134">Применение .NET Standard отменяет предыдущий подход использования различных целей переносной библиотеки классов (PCL).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-134">Targeting .NET Standard supersedes the previous approach of using various portable class library (PCL) targets.</span></span> <span data-ttu-id="a5f3c-135">Таким образом, эта документация посвящена созданию пакетов для .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-135">This documentation therefore focuses on creating packages for .NET Standard.</span></span>

## <a name="nuget-tools"></a><span data-ttu-id="a5f3c-136">Средства NuGet</span><span class="sxs-lookup"><span data-stu-id="a5f3c-136">NuGet tools</span></span>

<span data-ttu-id="a5f3c-137">Кроме поддержки размещения, NuGet также предоставляет широкий набор средств, используемых как создателями, так и потребителями.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-137">In addition to hosting support, NuGet also provides a variety of tools used by both creators and consumers.</span></span> <span data-ttu-id="a5f3c-138">Сведения о получении конкретных средств см. в разделе [Установка клиентских средств NuGet](install-nuget-client-tools.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-138">See [Installing NuGet client tools](install-nuget-client-tools.md) for how to obtain specific tools.</span></span>

| <span data-ttu-id="a5f3c-139">Средство</span><span class="sxs-lookup"><span data-stu-id="a5f3c-139">Tool</span></span> | <span data-ttu-id="a5f3c-140">Платформы</span><span class="sxs-lookup"><span data-stu-id="a5f3c-140">Platforms</span></span> | <span data-ttu-id="a5f3c-141">Применимые сценарии</span><span class="sxs-lookup"><span data-stu-id="a5f3c-141">Applicable Scenarios</span></span> | <span data-ttu-id="a5f3c-142">ОПИСАНИЕ</span><span class="sxs-lookup"><span data-stu-id="a5f3c-142">Description</span></span> |
| --- | --- | --- | --- |
| [<span data-ttu-id="a5f3c-143">dotnet CLI</span><span class="sxs-lookup"><span data-stu-id="a5f3c-143">dotnet CLI</span></span>](consume-packages/install-use-packages-dotnet-cli.md) | <span data-ttu-id="a5f3c-144">Все</span><span class="sxs-lookup"><span data-stu-id="a5f3c-144">All</span></span> | <span data-ttu-id="a5f3c-145">Создание, потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-145">Creation, Consumption</span></span> | <span data-ttu-id="a5f3c-146">Средство CLI для библиотек .NET Core и .NET Standard, а также для проектов в стиле пакета SDK, нацеленных на .NET Framework (см. раздел [Атрибут SDK](/dotnet/core/tools/csproj#additions)).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-146">CLI tool for .NET Core and .NET Standard libraries, and for SDK-style projects that target .NET Framework (see [SDK attribute](/dotnet/core/tools/csproj#additions)).</span></span> <span data-ttu-id="a5f3c-147">Предоставляет определенные возможности CLI NuGet непосредственно внутри цепочки инструментов .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-147">Provides certain NuGet CLI capabilities directly within the .NET Core tool chain.</span></span> <span data-ttu-id="a5f3c-148">Как и CLI `nuget.exe`, CLI dotnet не взаимодействует с проектами Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-148">As with the `nuget.exe` CLI, the dotnet CLI does not interact with Visual Studio projects.</span></span> |
| [<span data-ttu-id="a5f3c-149">Интерфейс командной строки nuget.exe</span><span class="sxs-lookup"><span data-stu-id="a5f3c-149">nuget.exe CLI</span></span>](consume-packages/install-use-packages-nuget-cli.md) | <span data-ttu-id="a5f3c-150">Все</span><span class="sxs-lookup"><span data-stu-id="a5f3c-150">All</span></span> | <span data-ttu-id="a5f3c-151">Создание, потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-151">Creation, Consumption</span></span> | <span data-ttu-id="a5f3c-152">Средство CLI для библиотек .NET Framework и проектов со стилем, отличным от пакета SDK, нацеленных на библиотеки .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-152">CLI tool for .NET Framework libraries and non-SDK-style projects that target .NET Standard libraries.</span></span> <span data-ttu-id="a5f3c-153">Предоставляет все функциональные возможности NuGet, при этом часть команд относится к создателям пакета, часть — только к потребителям, а остальные — ко всем.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-153">Provides all NuGet capabilities, with some commands applying specifically to package creators, some applying only to consumers, and others applying to both.</span></span> <span data-ttu-id="a5f3c-154">Например, создатели пакета используют команду `nuget pack` для создания пакета из различных сборок и связанных файлов, потребители пакета используют `nuget install` для включения пакетов в папку проекта, при этом все используют `nuget config` для задания переменных конфигурации NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-154">For example, package creators use the `nuget pack` command to create a package from various assemblies and related files, package consumers use `nuget install` to include packages in a project folder, and everyone uses `nuget config` to set NuGet configuration variables.</span></span> <span data-ttu-id="a5f3c-155">Как независящее от платформы средство, интерфейс командной строки NuGet не взаимодействует с проектами Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-155">As a platform-agnostic tool, the NuGet CLI does not interact with Visual Studio projects.</span></span> |
| [<span data-ttu-id="a5f3c-156">Консоль диспетчера пакетов</span><span class="sxs-lookup"><span data-stu-id="a5f3c-156">Package Manager Console</span></span>](consume-packages/install-use-packages-powershell.md) | <span data-ttu-id="a5f3c-157">Visual Studio в Windows</span><span class="sxs-lookup"><span data-stu-id="a5f3c-157">Visual Studio on Windows</span></span> | <span data-ttu-id="a5f3c-158">Потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-158">Consumption</span></span> | <span data-ttu-id="a5f3c-159">Предоставляет [команды PowerShell](reference/Powershell-Reference.md) для установки пакетов и управления ими в проектах Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-159">Provides [PowerShell commands](reference/Powershell-Reference.md) for installing and managing packages in Visual Studio projects.</span></span> |
| [<span data-ttu-id="a5f3c-160">Пользовательский интерфейс диспетчера пакетов</span><span class="sxs-lookup"><span data-stu-id="a5f3c-160">Package Manager UI</span></span>](consume-packages/install-use-packages-visual-studio.md) | <span data-ttu-id="a5f3c-161">Visual Studio в Windows</span><span class="sxs-lookup"><span data-stu-id="a5f3c-161">Visual Studio on Windows</span></span> | <span data-ttu-id="a5f3c-162">Потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-162">Consumption</span></span> | <span data-ttu-id="a5f3c-163">Предоставляет удобный пользовательский интерфейс для установки пакетов и управления ими в проектах Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-163">Provides an easy-to-use UI for installing and managing packages in Visual Studio projects.</span></span> |
| [<span data-ttu-id="a5f3c-164">Управление пользовательским интерфейсом NuGet</span><span class="sxs-lookup"><span data-stu-id="a5f3c-164">Manage NuGet UI</span></span>](/visualstudio/mac/nuget-walkthrough) | <span data-ttu-id="a5f3c-165">Visual Studio для Mac</span><span class="sxs-lookup"><span data-stu-id="a5f3c-165">Visual Studio for Mac</span></span> | <span data-ttu-id="a5f3c-166">Потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-166">Consumption</span></span> | <span data-ttu-id="a5f3c-167">Предоставляет удобный пользовательский интерфейс для установки пакетов и управления ими в проектах Visual Studio для Mac.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-167">Provide an easy-to-use UI for installing and managing packages in Visual Studio for Mac projects.</span></span> |
| [<span data-ttu-id="a5f3c-168">MSBuild</span><span class="sxs-lookup"><span data-stu-id="a5f3c-168">MSBuild</span></span>](reference/msbuild-targets.md) | <span data-ttu-id="a5f3c-169">Windows</span><span class="sxs-lookup"><span data-stu-id="a5f3c-169">Windows</span></span> | <span data-ttu-id="a5f3c-170">Создание, потребление</span><span class="sxs-lookup"><span data-stu-id="a5f3c-170">Creation, Consumption</span></span> | <span data-ttu-id="a5f3c-171">Предоставляет возможность создавать и восстанавливать используемые в проекте пакеты напрямую с помощью цепочки инструментов MSBuild.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-171">Provides the ability to create packages and restore packages used in a project directly through the MSBuild tool chain.</span></span> |

<span data-ttu-id="a5f3c-172">Как видите, средства NuGet, с которыми вы работаете, в значительной степени зависят от того, создаете, потребляете или публикуете вы пакеты, а также от используемой платформы.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-172">As you can see, the NuGet tools you work with depend greatly on whether you're creating, consuming, or publishing packages, and the platform on which you're working.</span></span> <span data-ttu-id="a5f3c-173">Создатели пакета обычно также являются потребителями, так как берут за основу функции, имеющиеся в других пакетах NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-173">Package creators are typically also consumers, as they build on top of functionality that exists in other NuGet packages.</span></span> <span data-ttu-id="a5f3c-174">Конечно же, те пакеты, в свою очередь, могут зависеть еще от каких-либо.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-174">And those packages, of course, may in turn depend on still others.</span></span>

<span data-ttu-id="a5f3c-175">Дополнительные сведения см. в статье [Рабочий процесс создания пакета](create-packages/Overview-and-Workflow.md) и [Рабочий процесс использования пакета](consume-packages/Overview-and-Workflow.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-175">For more information, start with the [Package creation workflow](create-packages/Overview-and-Workflow.md) and [Package consumption workflow](consume-packages/Overview-and-Workflow.md) articles.</span></span>

## <a name="managing-dependencies"></a><span data-ttu-id="a5f3c-176">Управление зависимостями</span><span class="sxs-lookup"><span data-stu-id="a5f3c-176">Managing dependencies</span></span>

<span data-ttu-id="a5f3c-177">Возможность легко брать за основу работу других — это одна из наиболее мощных функций системы управления пакетами.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-177">The ability to easily build on the work of others is one of most powerful features of a package management system.</span></span> <span data-ttu-id="a5f3c-178">Соответственно, значительная часть работы NuGet заключается в управлении этим деревом или "схемой" зависимостей от имени проекта.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-178">Accordingly, much of what NuGet does is managing that dependency tree or "graph" on behalf of a project.</span></span> <span data-ttu-id="a5f3c-179">Проще говоря, вам нужно заботиться только о тех пакетах, которые вы используете непосредственно в проекте.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-179">Simply said, you need only concern yourself with those packages that you're directly using in a project.</span></span> <span data-ttu-id="a5f3c-180">Если эти пакеты используют другие пакеты (которые, в свою очередь, также используют пакеты), все эти зависимости нижнего уровня обрабатывает NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-180">If any of those packages themselves consume other packages (which can, in turn, consume still others), NuGet takes care of all those down-level dependencies.</span></span>

<span data-ttu-id="a5f3c-181">На следующем рисунке показан проект, зависящий от пяти пакетов, которые, в свою очередь, зависят от нескольких других.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-181">The following image shows a project that depends on five packages, which in turn depend on a number of others.</span></span>

![Пример графа зависимостей NuGet для проекта .NET](media/dependency-graph.png)

<span data-ttu-id="a5f3c-183">Обратите внимание, что некоторые пакеты встречаются на графе зависимостей несколько раз.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-183">Notice that some packages appear multiple times in the dependency graph.</span></span> <span data-ttu-id="a5f3c-184">Например, существует три разных потребителя пакета B, и каждый из них может также указывать другую версию этого пакета (не показано).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-184">For example, there are three different consumers of package B, and each consumer might also specify a different version for that package (not shown).</span></span> <span data-ttu-id="a5f3c-185">Это обычное дело, особенно для широко используемых пакетов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-185">This is a common occurrence, especially for widely-used packages.</span></span> <span data-ttu-id="a5f3c-186">NuGet выполняет всю работу, чтобы определить, какая именно версия пакета B отвечает потребностям всех потребителей.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-186">NuGet fortunately does all the hard work to determine exactly which version of package B satisfies all consumers.</span></span> <span data-ttu-id="a5f3c-187">Затем NuGet делает то же самое для всех других пакетов, независимо от того, насколько глубока схема зависимостей.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-187">NuGet then does the same for all other packages, no matter how deep the dependency graph.</span></span>

<span data-ttu-id="a5f3c-188">Дополнительные сведения о том, как NuGet выполняет эту задачу, см. в разделе [Разрешение зависимостей](consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-188">For more details on how NuGet performs this service, see [Dependency resolution](consume-packages/dependency-resolution.md).</span></span>

## <a name="tracking-references-and-restoring-packages"></a><span data-ttu-id="a5f3c-189">Отслеживание ссылок и восстановление пакетов</span><span class="sxs-lookup"><span data-stu-id="a5f3c-189">Tracking references and restoring packages</span></span>

<span data-ttu-id="a5f3c-190">Так как проекты можно легко перемещать между компьютерами разработчиков, репозиториями управления исходным кодом, серверами сборки и т. д., крайне непрактично хранить двоичные сборки из пакетов NuGet напрямую привязанными к проекту.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-190">Because projects can easily move between developer computers, source control repositories, build servers, and so forth, it's highly impractical to keep the binary assemblies of NuGet packages directly bound to a project.</span></span> <span data-ttu-id="a5f3c-191">В этом случае каждая копия проекта будет излишне раздутой (и, следовательно, расходовать пространство в репозиториях системы управления исходным кодом).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-191">Doing so would make each copy of the project unnecessarily bloated (and thereby waste space in source control repositories).</span></span> <span data-ttu-id="a5f3c-192">Кроме того, обновить двоичные файлы пакета до новой версии будет очень сложно, так как обновление будет применяться ко всем копиям проекта.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-192">It would also make it very difficult to update package binaries to newer versions as updates would have to be applied across all copies of the project.</span></span>

<span data-ttu-id="a5f3c-193">Вместо этого NuGet поддерживает простой список ссылок на пакеты, от которых зависит проект, включая зависимости верхнего и нижнего уровня.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-193">NuGet instead maintains a simple reference list of the packages upon which a project depends, including both top-level and down-level dependencies.</span></span> <span data-ttu-id="a5f3c-194">То есть при установке пакета с некоторого узла в проект NuGet записывает идентификатор пакета и номер версии в этот список ссылок.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-194">That is, whenever you install a package from some host into a project, NuGet records the package identifier and version number in the reference list.</span></span> <span data-ttu-id="a5f3c-195">(При удалении пакет, конечно же, убирается из этого списка.) Затем в NuGet можно восстановить все связанные пакеты по запросу, как описано в статье о [восстановлении пакета](consume-packages/package-restore.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-195">(Uninstalling a package, of course, removes it from the list.) NuGet then provides a means to restore all referenced packages upon request, as described on [Package restore](consume-packages/package-restore.md).</span></span>

![Список ссылок NuGet создается при установке пакета и может использоваться для восстановления пакетов в другом месте.](media/nuget-restore.png)

<span data-ttu-id="a5f3c-197">С помощью одного только списка ссылок NuGet может переустановить, то есть *восстановить*, все эти пакеты с открытых и (или) закрытых узлов в любой момент времени.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-197">With only the reference list, NuGet can then reinstall&mdash;that is, *restore*&mdash;all of those packages from public and/or private hosts at any later time.</span></span> <span data-ttu-id="a5f3c-198">При фиксации проекта в системе управления исходным кодом или предоставления его для общего доступа каким-либо иным образом нужно включить только список ссылок и исключить какие-либо двоичные файлы пакета (см. раздел [Пропуск пакетов NuGet в системах управления исходным кодом](consume-packages/packages-and-source-control.md).)</span><span class="sxs-lookup"><span data-stu-id="a5f3c-198">When committing a project to source control, or sharing it in some other way, you include only the reference list and exclude any package binaries (see [Packages and source control](consume-packages/packages-and-source-control.md).)</span></span>

<span data-ttu-id="a5f3c-199">Компьютер, принимающий проект, например сервер сборки, получающий копию проекта в рамках работы системы автоматического развертывания, просто запрашивает у NuGet восстановление зависимости всякий раз, когда они понадобятся.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-199">The computer that receives a project, such as a build server obtaining a copy of the project as part of an automated deployment system, simply asks NuGet to restore dependencies whenever they're needed.</span></span> <span data-ttu-id="a5f3c-200">Системы сборки, такие как Azure DevOps, предоставляют шаги "Восстановление NuGet" именно для этой цели.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-200">Build systems like Azure DevOps provide "NuGet restore" steps for this exact purpose.</span></span> <span data-ttu-id="a5f3c-201">Аналогично, когда разработчики получают копию проекта (например, при клонировании репозитория), они могут вызвать такие команды, как `nuget restore` (CLI NuGet), `dotnet restore` (CLI dotnet) или `Install-Package` (консоль диспетчера пакетов), чтобы получить все необходимые пакеты.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-201">Similarly, when developers obtain a copy of a project (as when cloning a repository), they can invoke command like `nuget restore` (NuGet CLI), `dotnet restore` (dotnet CLI), or `Install-Package` (Package Manager Console) to obtain all the necessary packages.</span></span> <span data-ttu-id="a5f3c-202">Visual Studio, со своей стороны, автоматически восстанавливает пакеты при создании проекта (при условии, что включено автоматическое восстановление, как описано в статье [Восстановление пакетов](consume-packages/package-restore.md)).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-202">Visual Studio, for its part, automatically restores packages when building a project (provided that automatic restore is enabled, as described on [Package restore](consume-packages/package-restore.md)).</span></span>

<span data-ttu-id="a5f3c-203">Очевидно, что основная роль NuGet, связанная с разработчиками, заключается в обслуживании этого списка ссылок от имени проекта и предоставлении средств для эффективного восстановления (и обновления) таких указанных в ссылках пакетов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-203">Clearly, then, NuGet's primary role where developers are concerned is maintaining that reference list on behalf of your project and providing the means to efficiently restore (and update) those referenced packages.</span></span> <span data-ttu-id="a5f3c-204">Этот список хранится в одном из двух указанных ниже *форматов управления пакетами*:</span><span class="sxs-lookup"><span data-stu-id="a5f3c-204">This list is maintained in one of two *package management formats*, as they're called:</span></span>

- <span data-ttu-id="a5f3c-205">[PackageReference](consume-packages/package-references-in-project-files.md) (также известном как "Ссылки на пакет в файлах проекта"): *(NuGet 4.0 и более поздних версий)* ведет список зависимостей верхнего уровня проекта непосредственно в файле проекта, поэтому отдельный файл не требуется.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-205">[PackageReference](consume-packages/package-references-in-project-files.md) (or "package references in project files") | *(NuGet 4.0+)* Maintains a list of a project's top-level dependencies directly within the project file, so no separate file is needed.</span></span> <span data-ttu-id="a5f3c-206">Связанный файл `obj/project.assets.json` создается динамически. Этот файл позволяет управлять общей схемой зависимостей пакетов, которые проект использует со всеми зависимостями нижнего уровня.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-206">An associated file, `obj/project.assets.json`, is dynamically generated to manage the overall dependency graph of the packages that a project uses along with all down-level dependencies.</span></span> <span data-ttu-id="a5f3c-207">В проектах .NET Core всегда используется формат PackageReference.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-207">PackageReference is always used by .NET Core projects.</span></span>

- <span data-ttu-id="a5f3c-208">[`packages.config`](reference/packages-config.md): *(NuGet 1.0+)* XML-файл, содержащий неструктурированный список всех зависимостей в проекте, включая зависимости других установленных пакетов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-208">[`packages.config`](reference/packages-config.md): *(NuGet 1.0+)* An XML file that maintains a flat list of all dependencies in the project, including the dependencies of other installed packages.</span></span> <span data-ttu-id="a5f3c-209">Установленные или восстановленные пакеты хранятся в папке `packages`.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-209">Installed or restored packages are stored in a `packages` folder.</span></span>

<span data-ttu-id="a5f3c-210">Применение конкретного формата управления пакетами зависит от типа проекта и доступной версии Visual Studio и NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-210">Which package management format is employed in any given project depends on the project type, and the available version of NuGet (and/or Visual Studio).</span></span> <span data-ttu-id="a5f3c-211">Чтобы проверить, какой формат используется, просто найдите `packages.config` в корневом каталоге проекта после установки первого пакета.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-211">To check what format is being used, simply look for `packages.config` in the project root after installing your first package.</span></span> <span data-ttu-id="a5f3c-212">Если этот файл отсутствует, найдите в файле проекта элемент \<PackageReference\>.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-212">If you don't have that file, look in the project file directly for a \<PackageReference\> element.</span></span>

<span data-ttu-id="a5f3c-213">При наличии возможности выбора рекомендуем использовать PackageReference.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-213">When you have a choice, we recommend using PackageReference.</span></span> <span data-ttu-id="a5f3c-214">Файл `packages.config` используется в устаревших версиях и больше не применяется в активной разработке.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-214">`packages.config` is maintained for legacy purposes and is no longer under active development.</span></span>

> [!Tip]
> <span data-ttu-id="a5f3c-215">Различные команды интерфейса командной строки `nuget.exe`, например `nuget install`, не добавляют автоматически пакет в список ссылок.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-215">Various `nuget.exe` CLI commands, like `nuget install`, do not automatically add the package to the reference list.</span></span> <span data-ttu-id="a5f3c-216">Этот список обновляется при установке пакета с помощью диспетчера пакетов Visual Studio (пользовательского интерфейса или консоли) и интерфейса командной строки `dotnet.exe`.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-216">The list is updated when installing a package with the Visual Studio Package Manager (UI or Console), and with `dotnet.exe` CLI.</span></span>

## <a name="what-else-does-nuget-do"></a><span data-ttu-id="a5f3c-217">Что еще делает NuGet?</span><span class="sxs-lookup"><span data-stu-id="a5f3c-217">What else does NuGet do?</span></span>

<span data-ttu-id="a5f3c-218">Мы уже выучили следующие характеристики NuGet:</span><span class="sxs-lookup"><span data-stu-id="a5f3c-218">So far you've learned the following characteristics of NuGet:</span></span>

- <span data-ttu-id="a5f3c-219">NuGet предоставляет центральный репозиторий nuget.org с поддержкой частного размещения.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-219">NuGet provides the central nuget.org repository with support for private hosting.</span></span>
- <span data-ttu-id="a5f3c-220">NuGet предоставляет разработчикам средства для создания, публикации и использования пакетов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-220">NuGet provides the tools developers need for creating, publishing, and consuming packages.</span></span>
- <span data-ttu-id="a5f3c-221">Самое главное, NuGet ведет список ссылок для пакетов, используемых в проекте, а также позволяет восстанавливать и обновлять пакеты из этого списка.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-221">Most importantly, NuGet maintains a reference list of packages used in a project and the ability to restore and update those packages from that list.</span></span>

<span data-ttu-id="a5f3c-222">Чтобы обеспечить эффективную работу этих процессов, NuGet осуществляет некоторые оптимизации в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-222">To make these processes work efficiently, NuGet does some behind-the-scenes optimizations.</span></span> <span data-ttu-id="a5f3c-223">В частности, NuGet управляет кэшем пакета и папкой глобальных пакетов, что позволяет упростить установку и повторною установку.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-223">Most notably, NuGet manages a package cache and a global packages folder to shortcut installation and reinstallation.</span></span> <span data-ttu-id="a5f3c-224">Кэш позволяет избежать загрузки пакета, который уже установлен на компьютере.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-224">The cache avoids downloading a package that's already been installed on the machine.</span></span> <span data-ttu-id="a5f3c-225">Папка глобальных пакетов позволяет в нескольких проектах совместно использовать один установленный пакет, тем самым уменьшая общий размер пакетов NuGet на компьютере.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-225">The global packages folder allows multiple projects to share the same installed package, thereby reducing NuGet's overall footprint on the computer.</span></span> <span data-ttu-id="a5f3c-226">Это очень удобно, когда вы часто восстанавливаете большее количество пакетов, например, как на сервере сборки.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-226">The cache and global packages folder are also very helpful when you're frequently restoring a larger number of packages, as on a build server.</span></span> <span data-ttu-id="a5f3c-227">Дополнительные сведения об этих механизмах см. в статье [Управление папкой установки глобальных пакетов, кэшем и временными папками](consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-227">For more details on these mechanisms, see [Managing the global packages and cache folders](consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="a5f3c-228">В рамках отдельного проекта NuGet управляет общей схемой зависимостей, что включает в себя разрешение нескольких ссылок на различные версии одного пакета.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-228">Within an individual project, NuGet manages the overall dependency graph, which again includes resolving multiple references to different versions of the same package.</span></span> <span data-ttu-id="a5f3c-229">Довольно часто проект зависит от одного или нескольких пакетов, имеющих такие же зависимости.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-229">It's quite common that a project takes a dependency on one or more packages that themselves have the same dependencies.</span></span> <span data-ttu-id="a5f3c-230">Некоторые из наиболее полезных пакетов служебных программ на сайте nuget.org используются многими другими пакетами.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-230">Some of the most useful utility packages on nuget.org are employed by many other packages.</span></span> <span data-ttu-id="a5f3c-231">В общей схеме зависимостей вы легко можете иметь десять различных ссылок на разные версии одного пакета.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-231">In the entire dependency graph, then, you could easily have ten different references to different versions of the same package.</span></span> <span data-ttu-id="a5f3c-232">Чтобы избежать переноса нескольких версий этого пакета в само приложение, NuGet определяет, какую отдельную версию могут использовать все потребители.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-232">To avoid bringing multiple versions of that package into the application itself, NuGet sorts out which single version can be used by all consumers.</span></span> <span data-ttu-id="a5f3c-233">(Дополнительные сведения см. в разделе [Принципы разрешения зависимостей пакетов в NuGet](consume-packages/dependency-resolution.md).)</span><span class="sxs-lookup"><span data-stu-id="a5f3c-233">(For more information, see [Dependency Resolution](consume-packages/dependency-resolution.md).)</span></span>

<span data-ttu-id="a5f3c-234">Кроме того, NuGet обслуживает все спецификации, связанные со структурированием пакетов (включая [локализацию](create-packages/creating-localized-packages.md) и [отладочные символы](create-packages/symbol-packages.md)) и [ссылками](consume-packages/package-references-in-project-files.md) на них (включая [диапазоны версий](reference/package-versioning.md#version-ranges-and-wildcards) и [предварительные версии](create-packages/prerelease-packages.md)). NuGet также имеет различные API для работы со своими службами программно и предоставляет поддержку разработчикам, которые пишут расширения Visual Studio и шаблоны проектов.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-234">Beyond that, NuGet maintains all the specifications related to how packages are structured (including [localization](create-packages/creating-localized-packages.md) and [debug symbols](create-packages/symbol-packages.md)) and how they are [referenced](consume-packages/package-references-in-project-files.md) (including [version ranges](reference/package-versioning.md#version-ranges-and-wildcards) and [pre-release versions](create-packages/prerelease-packages.md).) NuGet also provides various APIs to work with its services programmatically, and provides support for developers who write Visual Studio extensions and project templates.</span></span>

<span data-ttu-id="a5f3c-235">Если изучить содержание этой документации, можно найти все указанные возможности и заметки о выпуске, отсылающие к самому начальному этапу развития NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-235">Take a moment to browse the table of contents for this documentation, and you see all of these capabilities represented there, along with release notes dating back to NuGet's beginnings.</span></span>

## <a name="comments-contributions-and-issues"></a><span data-ttu-id="a5f3c-236">Комментарии, вклады и проблемы</span><span class="sxs-lookup"><span data-stu-id="a5f3c-236">Comments, contributions, and issues</span></span>

<span data-ttu-id="a5f3c-237">Мы убедительно просим вас оставлять комментарии и вносить вклад в эту документацию. Просто выберите команды **Отзывы** и **Изменить** вверху любой страницы или посетите [репозиторий документации](https://github.com/NuGet/docs.microsoft.com-nuget/) и [список проблем с документацией](https://github.com/NuGet/docs.microsoft.com-nuget/issues) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-237">Finally, we very much welcome comments and contributions to this documentation&mdash;just select the **Feedback** and **Edit** commands on the top of any page, or visit the [docs repository](https://github.com/NuGet/docs.microsoft.com-nuget/) and [docs issue list](https://github.com/NuGet/docs.microsoft.com-nuget/issues) on GitHub.</span></span>

<span data-ttu-id="a5f3c-238">Мы также рады вкладам в сам NuGet через [различные репозитории GitHub](https://github.com/NuGet/Home). Сведения о проблемах NuGet приведены по адресу [https://github.com/NuGet/home/issues](https://github.com/NuGet/home/issues).</span><span class="sxs-lookup"><span data-stu-id="a5f3c-238">We also welcome contributions to NuGet itself through its [various GitHub repositories](https://github.com/NuGet/Home); NuGet issues can be found on [https://github.com/NuGet/home/issues](https://github.com/NuGet/home/issues).</span></span>

<span data-ttu-id="a5f3c-239">Надеемся, что вам понравится работать с NuGet.</span><span class="sxs-lookup"><span data-stu-id="a5f3c-239">Enjoy your NuGet experience!</span></span>
