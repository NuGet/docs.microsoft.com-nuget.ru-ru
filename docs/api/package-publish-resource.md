---
title: Принудительная отправка и удаление, API NuGet
description: Службы публикации позволяет клиентам публикации новых пакетов и удалить из списка или удалите существующие пакеты.
author: joelverhagen
ms.author: jver
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: ad66d8e0ffda13aaef744104c213863b0e111e0e
ms.sourcegitcommit: 1d1406764c6af5fb7801d462e0c4afc9092fa569
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2018
ms.locfileid: "43547525"
---
# <a name="push-and-delete"></a>Принудительная отправка и удаление

Можно отправить, удалить (или удалить из списка, в зависимости от реализации сервера) и вернуть в список пакетов с помощью NuGet V3 API. Эти операции расположенного за пределами класса `PackagePublish` найти ресурс в [индекс службы](service-index.md).

## <a name="versioning"></a>Управление версиями

Следующие `@type` используется значение:

Значение @type          | Примечания
-------------------- | -----
PackagePublish/2.0.0 | Первоначальный выпуск

## <a name="base-url"></a>Базовый URL-адрес

Базовый URL-адрес для следующих API-интерфейсов является значением `@id` свойство `PackagePublish/2.0.0` ресурсов в источнике пакета [индекс службы](service-index.md). В приведенной ниже документации используется URL-адреса для nuget.org. Рассмотрите возможность `https://www.nuget.org/api/v2/package` как заполнитель для `@id` значение найдено в индекс службы.

Обратите внимание на то, что этот URL-адрес указывает в том же расположении, как устаревшие принудительной конечных точек версии 2, поскольку протокол одинаковы.

## <a name="http-methods"></a>Методы HTTP

`PUT`, `POST` И `DELETE` поддерживаемых методов HTTP этот ресурс. Какие методы поддерживаются на каждой конечной точки см. в разделе ниже.

## <a name="push-a-package"></a>Отправьте пакет

> [!Note]
> имеет NuGet.org [Дополнительные требования](NuGet-Protocols.md) для взаимодействия с конечной точкой Push-уведомлений.

NuGet.org поддерживает принудительную отправку новых пакетов, с помощью следующего API. Если пакет с предоставленным Идентификатором и версией уже существует, nuget.org будет отклонять Push-уведомления. Другие источники пакета может поддерживать, заменив существующий пакет.

    PUT https://www.nuget.org/api/v2/package

### <a name="request-parameters"></a>Параметры запроса

name           | Увеличение     | Тип   | Обязательно | Примечания
-------------- | ------ | ------ | -------- | -----
X-NuGet-ApiKey | Header | string | да      | Например `X-NuGet-ApiKey: {USER_API_KEY}`.

Ключ API — непрозрачная строка получить из источника пакета пользователем и настроены в клиент. Нет определенного формата строки является обязательной, но длина ключа API не должен превышать размер для значения заголовка HTTP.

### <a name="request-body"></a>Текст запроса

Текст запроса должна иметь следующий вид:

#### <a name="multipart-form-data"></a>Данных составной формы

Заголовок запроса `Content-Type` является `multipart/form-data` и первый элемент в тексте запроса — необработанные байты файла nupkg принудительно. Последующих элементов составного текста учитываются. Имя файла или любые другие заголовки составных элементов учитываются.

### <a name="response"></a>Ответ

Код состояния | Значение
----------- | -------
201, 202    | Пакет был успешно отправлен
400         | Предоставленный пакет является недопустимым
409         | Пакет с предоставленным Идентификатором и версией уже существует

Реализации сервера зависят от код состояния успеха, возвращается, если пакет успешно отправлена.

## <a name="delete-a-package"></a>Удаление пакета

NuGet.org интерпретирует запроса на удаление пакета как значение «удалить из списка». Это означает, что пакет будет по-прежнему доступен для существующих потребителей пакета, но пакет больше не отображается в результатах поиска или веб-интерфейса. Дополнительные сведения о такой подход, см. в разделе [удалить пакеты](../policies/deleting-packages.md) политики. Другие реализации серверов могут интерпретировать этот сигнал как окончательного удаления, обратимое удаление или удалить из списка. Например [NuGet.Server](https://www.nuget.org/packages/NuGet.Server) (серверную реализацию только вспомогательные API более старые версии 2) поддерживает, обрабатывающего этот запрос как окончательного удаления зависимости от параметра конфигурации или удаления из списка.

    DELETE https://www.nuget.org/api/v2/package/{ID}/{VERSION}

### <a name="request-parameters"></a>Параметры запроса

name           | Увеличение     | Тип   | Обязательно | Примечания
-------------- | ------ | ------ | -------- | -----
ID             | URL-адрес    | string | да      | Идентификатор пакета для удаления
VERSION        | URL-адрес    | string | да      | Версия пакета для удаления
X-NuGet-ApiKey | Header | string | да      | Например `X-NuGet-ApiKey: {USER_API_KEY}`.

### <a name="response"></a>Ответ

Код состояния | Значение
----------- | -------
204         | Пакет был удален
404         | Нет пакета с предоставленным `ID` и `VERSION` существует

## <a name="relist-a-package"></a>Вернуть в список пакета

Если пакет будет удалена из списка, это можно делать этот пакет снова отображается в результатах поиска, используя конечную точку «вернуть в список». Эта конечная точка поддерживает же форму, что [удалить (исключить) конечной точки](#delete-a-package) , но использует `POST` метод HTTP, а не `DELETE` метод.

Если пакет уже присутствует в списке, запрос по-прежнему выполняется успешно.

    POST https://www.nuget.org/api/v2/package/{ID}/{VERSION}

### <a name="request-parameters"></a>Параметры запроса

name           | Увеличение     | Тип   | Обязательно | Примечания
-------------- | ------ | ------ | -------- | -----
ID             | URL-адрес    | string | да      | Идентификатор пакета, чтобы вернуть в список
VERSION        | URL-адрес    | string | да      | Версия пакета, чтобы вернуть в список
X-NuGet-ApiKey | Header | string | да      | Например `X-NuGet-ApiKey: {USER_API_KEY}`.

### <a name="response"></a>Ответ

Код состояния | Значение
----------- | -------
200         | Пакет сейчас отобразится
404         | Нет пакета с предоставленным `ID` и `VERSION` существует
