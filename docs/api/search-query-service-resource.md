---
title: Поиск, API NuGet
description: Служба поиска позволяет клиентам запрашивать пакеты по ключевому слову и фильтровать результаты по определенным полям пакета.
author: joelverhagen
ms.author: jver
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: 86c9d07cf90b84fffd09b04847d41772dd633b98
ms.sourcegitcommit: b138bc1d49fbf13b63d975c581a53be4283b7ebf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2020
ms.locfileid: "93237878"
---
# <a name="search"></a>Поиск

Можно выполнять поиск пакетов, доступных в источнике пакета, с помощью API V3. Ресурс, используемый для поиска, — это `SearchQueryService` ресурс, найденный в [индексе службы](service-index.md).

## <a name="versioning"></a>Управление версиями

Используются следующие `@type` значения:

Значение @type                   | Примечания
----------------------------- | -----
сеарчкуерисервице            | Первоначальный выпуск
Сеарчкуерисервице/3.0.0 — бета-версия | Псевдоним `SearchQueryService`
Сеарчкуерисервице/3.0.0-RC   | Псевдоним `SearchQueryService`
Сеарчкуерисервице/3.5.0      | Включает поддержку `packageType` параметра запроса

### <a name="searchqueryservice350"></a>Сеарчкуерисервице/3.5.0
Эта версия предоставляет поддержку для `packageType` параметра запроса и `packageTypes` свойства ответа, что позволяет фильтровать данные по определенным типам пакетов. Он полностью обратно совместим с запросами к `SearchQueryService` .

## <a name="base-url"></a>Базовый URL-адрес

Базовый URL-адрес для следующего API — это значение свойства, `@id` связанное с одним из вышеупомянутых значений ресурсов `@type` . В следующем документе будет использоваться базовый URL-адрес заполнителя `{@id}` .

## <a name="http-methods"></a>Методы HTTP

Все URL-адреса, найденные в ресурсе регистрации, поддерживают методы HTTP `GET` и `HEAD` .

## <a name="search-for-packages"></a>Поиск пакетов

API поиска позволяет клиенту запрашивать страницу пакетов, соответствующих указанному поисковому запросу. Интерпретация поискового запроса (например, разметка искомых терминов) определяется реализацией сервера, но общее ожидание заключается в том, что поисковый запрос используется для сопоставления идентификаторов пакетов, заголовков, описаний и тегов. Также можно рассмотреть другие поля метаданных пакета.

Без списка пакет никогда не должен отображаться в результатах поиска.

    GET {@id}?q={QUERY}&skip={SKIP}&take={TAKE}&prerelease={PRERELEASE}&semVerLevel={SEMVERLEVEL}&packageType={PACKAGETYPE}

### <a name="request-parameters"></a>Параметры запроса

name        | В     | Тип    | Обязательно | Примечания
----------- | ------ | ------- | -------- | -----
q           | URL-адрес    | строка  | Нет       | Условия поиска, используемые для фильтрации пакетов
skip        | URL-адрес    | Целое число | Нет       | Число пропускаемых результатов для разбивки на страницы
take        | URL-адрес    | Целое число | Нет       | Число возвращаемых результатов для разбивки на страницы
prerelease  | URL-адрес    | Логическое | Нет       | `true` или `false` определить, следует ли включать [пакеты предварительной версии](../create-packages/prerelease-packages.md)
семверлевел | URL-адрес    | строка  | Нет       | Строка версии SemVer 1.0.0 
packageType | URL-адрес    | строка  | Нет       | Тип пакета, используемый для фильтрации пакетов (добавляется в `SearchQueryService/3.5.0` )

Поисковый запрос `q` анализируется способом, который определяется реализацией сервера. nuget.org поддерживает базовую фильтрацию по [различным полям](../consume-packages/finding-and-choosing-packages.md#search-syntax). Если `q` значение не указано, должны возвращаться все пакеты, находящиеся в границах, накладываемых пропустить и Take. Это позволит открыть вкладку "Обзор" в интерфейсе NuGet в Visual Studio.

Значение `skip` параметра по умолчанию равно 0.

`take`Параметр должен быть целым числом больше нуля. Реализация сервера может накладывать максимальное значение.

Если `prerelease` не указан, пакеты предварительной версии исключаются.

`semVerLevel`Параметр запроса используется для явного согласия на [пакеты 2.0.0 SemVer](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29#identifying-semver-v200-packages).
Если этот параметр запроса исключен, будут возвращены только пакеты с совместимыми с SemVer 1.0.0 версиями (со [стандартными предупреждениями управления версиями NuGet](../concepts/package-versioning.md) , такими как строки версии с 4 целыми частями).
Если указан `semVerLevel=2.0.0` , будут возвращены совместимые пакеты SemVer 1.0.0 и SemVer 2.0.0. Дополнительные сведения см. в разделе [Поддержка SemVer 2.0.0 для NuGet.org](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29) .

`packageType`Параметр используется для дальнейшей фильтрации результатов поиска только в тех пакетах, которые имеют по крайней мере один тип пакета, соответствующий имени типа пакета.
Если предоставленный тип пакета не является допустимым типом пакета, как определено в [документе типа пакета](https://github.com/NuGet/Home/wiki/Package-Type-%5BPacking%5D), будет возвращен пустой результат.
Если предоставленный тип пакета пуст, фильтр применяться не будет. Иными словами, передача значения в параметр packageType будет вести себя так, как если бы параметр не был передан.

### <a name="response"></a>Ответ

Ответ — это документ JSON, содержащий `take` Результаты поиска. Результаты поиска группируются по ИДЕНТИФИКАТОРу пакета.

Корневой объект JSON имеет следующие свойства:

Имя      | Тип             | Обязательно | Примечания
--------- | ---------------- | -------- | -----
тоталхитс | Целое число          | да      | Общее число совпадений, неотношении `skip` и `take`
Данные      | массив объектов | да      | Результаты поиска, соответствующие запросу

### <a name="search-result"></a>Результат поиска

Каждый элемент в `data` массиве представляет собой объект JSON, состоящий из группы версий пакета, использующих один и тот же идентификатор пакета.
Ниже приводится описание свойств объекта.

Имя           | Тип                       | Обязательно | Примечания
-------------- | -------------------------- | -------- | -----
идентификатор             | строка                     | да      | Идентификатор сопоставленного пакета
version        | строка                     | да      | Полная строка версии SemVer 2.0.0 пакета (может содержать метаданные сборки)
description    | строка                     | Нет       | 
versions       | массив объектов           | да      | Все версии пакета, соответствующие `prerelease` параметру
authors        | строка или массив строк | Нет       | 
iconUrl        | строка                     | Нет       | 
licenseUrl     | строка                     | Нет       | 
owners         | строка или массив строк | Нет       | 
projectUrl     | строка                     | Нет       | 
регистрация   | строка                     | Нет       | Абсолютный URL-адрес связанного [индекса регистрации](registration-base-url-resource.md#registration-index)
Итоги        | строка                     | Нет       | 
tags           | строка или массив строк | Нет       | 
title          | строка                     | Нет       | 
тоталдовнлоадс | Целое число                    | Нет       | Это значение может выводиться суммой загрузок в `versions` массиве.
верификаци       | Логическое                    | Нет       | Логическое значение JSON, указывающее, [проверен](../nuget-org/id-prefix-reservation.md) ли пакет
packageTypes   | массив объектов           | да      | Типы пакетов, определяемые автором пакета (добавлены в `SearchQueryService/3.5.0` )

В nuget.org проверенный пакет содержит идентификатор пакета, совпадающий с зарезервированным префиксом идентификатора и принадлежащий одному из владельцев зарезервированного префикса. Дополнительные сведения см. в [документации по зарезервированию префиксов идентификаторов](../nuget-org/id-prefix-reservation.md).

Метаданные, содержащиеся в объекте результата поиска, берутся из последней версии пакета. Каждый элемент `versions` массива является объектом JSON со следующими свойствами:

Имя      | Тип    | Обязательно | Примечания
--------- | ------- | -------- | -----
@id       | строка  | да      | Абсолютный URL-адрес связанного [конечного листа регистрации](registration-base-url-resource.md#registration-leaf)
version   | строка  | да      | Полная строка версии SemVer 2.0.0 пакета (может содержать метаданные сборки)
загрузки | Целое число | да      | Число Скачиваний для конкретной версии пакета

`packageTypes`Массив всегда будет содержать хотя бы один элемент (1). Тип пакета для данного идентификатора пакета считается типами пакетов, определенными в последней версии пакета, по отношению к другим параметрам поиска. Каждый элемент `packageTypes` массива является объектом JSON со следующими свойствами:

Имя      | Тип    | Обязательно | Примечания
--------- | ------- | -------- | -----
name      | строка  | да      | Имя типа пакета.

### <a name="sample-request"></a>Пример запроса

    GET https://azuresearch-usnc.nuget.org/query?q=NuGet.Versioning&prerelease=false&semVerLevel=2.0.0

### <a name="sample-response"></a>Пример ответа

[!code-JSON [search-result.json](./_data/search-result.json)]