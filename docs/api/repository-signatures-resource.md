---
title: Репозиторий Signatures, NuGet API | Документация Майкрософт
author: joelverhagen
ms.author: jver
ms.date: 3/2/2018
ms.topic: reference
description: Ресурс подписи репозиторий позволяет клиентам источники пакетов рады сообщить о их репозитории, подписи возможности.
ms.reviewer:
- karann
- unniravindranathan
ms.openlocfilehash: ea318446c41a0d85d3fbf959dd38c929a0d0e9a1
ms.sourcegitcommit: 6b71926f062ecddb8729ef8567baf67fd269642a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2019
ms.locfileid: "59931856"
---
# <a name="repository-signatures"></a>Подписи репозитория

Если источник пакета поддерживает добавление подписей репозитория для опубликованных пакетов, можно для клиента определить сертификаты для подписи, используемые в источнике пакета. Этот ресурс позволяет клиентам обнаруживать репозиторием подписи пакета было изменено или имеет непредвиденный сертификат для подписи.

Ресурс, используемый для получения сведения о подписи этот репозиторий является `RepositorySignatures` найти ресурс в [индекс службы](service-index.md).

## <a name="versioning"></a>Управление версиями

Следующие `@type` используется значение:

Значение@type                 | Примечания
-------------------------- | -----
RepositorySignatures/4.7.0 | Первоначальный выпуск
RepositorySignatures/4.9.0 | Поддерживаемые клиенты v4.9 + NuGet
RepositorySignatures/5.0.0 | Разрешает включение `allRepositorySigned`. Поддерживаемые клиенты NuGet версии 5.0 +

## <a name="base-url"></a>Базовый URL-адрес

URL-адрес точки входа для следующих API-интерфейсов является значением `@id` свойство, связанное с ресурсом, упомянутых выше `@type` значение. В этом разделе используется заполнитель URL-адреса `{@id}`.

Обратите внимание, что в отличие от других ресурсов, `{@id}` URL-адрес необходим обслуживаются по протоколу HTTPS.

## <a name="http-methods"></a>Методы HTTP

Все URL-адресов в ресурсов поддержки только HTTP репозитория сигнатур методов `GET` и `HEAD`.

## <a name="repository-signatures-index"></a>Индекс подписи репозитория

Индекс подписи репозитория содержит два элемента информации:

1. Ли найти все пакеты в источнике, подписанные этого источника пакетов репозитория.
1. Список сертификатов, используемых источника пакета для подписания пакетов.

В большинстве случаев в списке сертификатов будут добавляться только на. Новые сертификаты следует добавить в список при предыдущий сертификат для подписи истек, и источник пакета должен начать использовать новый сертификат подписи. Если сертификат удаляется из списка, это означает, что все подписи пакетов, созданных с помощью удален сертификат для подписи больше не считается допустимым клиентом. В этом случае подпись пакета (но не обязательно пакета) является недопустимым. Политика клиента может разрешить установку пакета как число без знака.

В случае отзыва сертификатов (например клавиш) источник пакета должен повторно подписать все пакеты, подписанные сертификатом уязвимой. Кроме того источник пакета следует удалить затронутых сертификат из списка сертификатов подписи.

Следующий запрос извлекает индекс сигнатуры репозитория.

    GET {@id}

Индекс подписи репозиторий является документ JSON, который содержит объект со следующими свойствами:

name                | Тип             | Обязательно | Примечания
------------------- | ---------------- | -------- | -----
allRepositorySigned | boolean          | да      | Должно быть `false` 4.7.0 и 4.9.0 ресурсов
signingCertificates | Массив объектов | да      | 

`allRepositorySigned` Логическое значение присвоено значение false, если источник пакета имеет некоторые пакеты, имеющие подпись отсутствует репозиторий. Если логическое выражение имеет значение true, все пакеты, доступные на источник должен иметь сигнатуре репозитория, которая создается по одному из сертификатов подписей, упомянутые в `signingCertificates`.

> [!Warning]
> `allRepositorySigned` Логическое должно иметь значение false, 4.7.0 и 4.9.0 ресурсов. Клиенты NuGet v4.7 v4.8 и v4.9 не могут устанавливать пакеты из источников, которые имеют `allRepositorySigned` задано значение true.

Должен быть один или несколько сертификатов подписи в `signingCertificates` массив Если `allRepositorySigned` логическое выражение имеет значение в значение true. Если массив пуст и `allRepositorySigned` имеет значение true, все пакеты из источника должно считаться недействительным, несмотря на то, что политику клиента по-прежнему может разрешить использование пакетов. Каждый элемент этого массива представляет собой объект JSON со следующими свойствами.

name         | Тип   | Обязательно | Примечания
------------ | ------ | -------- | -----
contentUrl   | string | да      | Абсолютный URL-адрес в кодировке DER открытый сертификат
отпечатки пальцев | object | да      |
Тема      | string | да      | Различающееся имя субъекта из сертификата
issuer       | string | да      | Различающееся имя издателя сертификата
notBefore    | string | да      | Метка времени начала срока действия сертификата
notAfter     | string | да      | Отметка времени окончания срока действия сертификата

Обратите внимание, что `contentUrl` должен обслуживаться по протоколу HTTPS. Этот URL-адрес имеет не определенному шаблону URL-адрес и должны быть динамически обнаружены при с помощью этого документа репозитория сигнатуры индекса. 

Все свойства в этом объекте (помимо `contentUrl`) должен быть производное от сертификата, расположенный `contentUrl`.
Эти производное свойства предоставляются для удобства, чтобы свести к минимуму циклами.

`fingerprints` Объект имеет следующие свойства:

name                   | Тип   | Обязательно | Примечания
---------------------- | ------ | -------- | -----
2.16.840.1.101.3.4.2.1 | string | да      | Отпечаток SHA-256

Имя ключа `2.16.840.1.101.3.4.2.1` — это идентификатор Объекта хэш-алгоритма SHA-256.

Все значения хэша должны быть строчные буквы, шестнадцатеричной кодировке строковые представления дайджест хэша.

### <a name="sample-request"></a>Пример запроса

    GET https://api.nuget.org/v3-index/repository-signatures/index.json

### <a name="sample-response"></a>Пример ответа

[!code-JSON [repository-signatures-index.json](./_data/repository-signatures-index.json)]
