---
title: Обзор API NuGet
description: NuGet API — это набор конечных точек HTTP, которые могут использоваться для загрузки пакетов, получить метаданные, публикации новых пакетов и т. д.
author: joelverhagen
ms.author: jver
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: 39b710c483ce4b3f2da30df6bb5b6842f9ee1fca
ms.sourcegitcommit: 6ea2ff8aaf7743a6f7c687c8a9400b7b60f21a52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2019
ms.locfileid: "54324842"
---
# <a name="nuget-api"></a>API NuGet

NuGet API — это набор конечных точек HTTP, которые могут использоваться для загрузки пакетов, получить метаданные, публикации новых пакетов и выполнения большинства других операций, доступных в официальных клиентов NuGet.

Этот API используется клиентом NuGet в Visual Studio, nuget.exe и интерфейса командной строки .NET для выполнения операций NuGet, таких как [ `dotnet restore` ](/dotnet/core/tools/dotnet-restore?tabs=netcore2x), поиск в пользовательском Интерфейсе Visual Studio и [ `nuget.exe push` ](../tools/cli-ref-push.md).

Обратите внимание, в некоторых случаях nuget.org имеет дополнительные требования, которые не являются обязательными для других источников пакетов. Эти различия описаны по [протоколы nuget.org](nuget-protocols.md).

Простое перечисление и скачивание доступных nuget.exe версии, см. в разделе [tools.json](tools-json.md) конечной точки.

## <a name="service-index"></a>Индекс службы

Точка входа для API — это документ JSON в известное расположение. В этом документе называется **индекс службы**. Индекс службы для nuget.org находится `https://api.nuget.org/v3/index.json`.

В этом документе JSON содержит список *ресурсы* которого предоставляют различные возможности и выполнения различных сценариев использования.

Клиенты, которые поддерживают API должен принимать один или несколько из этих URL-адрес службы индекс как средства подключения к источникам соответствующий пакет.

Дополнительные сведения о службе индекс, см. в разделе [его Справочник по API](service-index.md).

## <a name="versioning"></a>Управление версиями

Этот API доступен версию протокола HTTP NuGet 3. Этот протокол, иногда называется «API V3». Эти документы ссылку будет ссылаться на эту версию протокола просто как «API».

Указывает версию схемы индекса службы `version` свойство в индекс службы. API требует, что строка версии имеет номер основной версии `3`. Как некритических изменений со схемой индекса службы, строку версии дополнительный номер версии увеличивается.

Старые клиенты (например nuget.exe версии 2.x) не поддерживают V3 API и поддерживают только более старые версии 2 API, который здесь не рассматриваются.

NuGet V3 API называется таким образом, так как он является преемником V2 API, который был протокол на основе OData, реализован в версии 2.x официального клиента NuGet. V3 API сначала поддерживалась используется версия 3.0 официального клиента NuGet и по-прежнему версии последней основной протокол поддерживается клиентом NuGet 4.0, а также на. 

Не критическое протокола были внесены изменения в API со времени первого выпуска.

## <a name="resources-and-schema"></a>Ресурсы и схемы

**Индекс службы** описаны различные ресурсы. Ниже приведены текущий набор поддерживаемых ресурсов.

Имя ресурса                                                           | Обязательно | Описание
----------------------------------------------------------------------  | -------- | -----------
[`PackagePublish`](package-publish-resource.md)                        | да      | Push-уведомлений и удалить (или удалить из списка) пакеты.
[`SearchQueryService`](search-query-service-resource.md)               | да      | Фильтровать и искать пакеты по ключевому слову.
[`RegistrationsBaseUrl`](registration-base-url-resource.md)            | да      | Получите метаданные пакета.
[`PackageBaseAddress`](package-base-address-resource.md)               | да      | Получение содержимого пакета (файла nupkg).
[`SearchAutocompleteService`](search-autocomplete-service-resource.md) | Нет       | Найдите идентификаторы пакетов и версий, подстроку.
[`ReportAbuseUriTemplate`](report-abuse-resource.md)                   | Нет       | Создать URL-адрес для доступа к веб-страницы «сообщить о нарушении».
[`RepositorySignatures`](repository-signatures-resource.md)             | Нет      | Получение сертификатов, используемый для подписания репозитория.
[`Catalog`](catalog-resource.md)                                         | Нет      | Полную запись всех событий пакета.
[`SymbolPackagePublish`](symbol-package-publish-resource.md)            | Нет      | Отправьте пакеты символов.

Как правило сериализуются все недвоичные данные, возвращаемые API ресурса с помощью JSON. Схема ответа, возвращаемая функцией каждого ресурса в индекс службы определяется по отдельности для этого ресурса. Дополнительные сведения о каждом ресурсе см. в разделах, перечисленных выше.

В будущем по мере развития протокола для ответов JSON могут добавляться новые свойства. Для клиента должно быть устарели реализация не следует предполагать, что схема ответа является окончательным и не может включать дополнительные данные. Все свойства, которые не поддерживает реализацию можно проигнорировать.

> [!Note]
> Если источник не реализует `SearchAutocompleteService` корректно следует отключить любое поведение автозавершения. Когда `ReportAbuseUriTemplate` не реализован, о нарушении URL-адрес отчетов официальный возвращается клиента NuGet к nuget.org (отслеживаемые по [4924 # NuGet/Home](https://github.com/NuGet/Home/issues/4924)). Другие клиенты могут выбрать просто не отображать URL-адрес отчета о нарушении для пользователя.

## <a name="timestamps"></a>Метки времени

Все отметки времени, возвращаемых API представлены в формате UTC, или в противном случае указываются с помощью [ISO 8601](https://www.iso.org/iso-8601-date-and-time-format.html) представление. 

## <a name="http-methods"></a>Методы HTTP

Команда   | Использовать
------ | -----------
GET    | Выполняет операцию только для чтения, обычно извлечение данных.
HEAD,   | Извлекает заголовки ответа для соответствующего `GET` запроса.
PUT    | Создает ресурс, который не существует, или, если она существует, обновляет его. Некоторые ресурсы могут не поддерживать обновление.
DELETE | Удаляет или из списка ресурсов.

## <a name="http-status-codes"></a>Коды состояния HTTP

Код | Описание:
---- | -----
200  | Успех, и текст ответа.
201  | Успех и ресурс был создан.
202  | После принятия успешном выполнении запроса, но некоторые действия могут быть неполными и заполняется асинхронно.
204  | Успех, но не текст ответа.
301  | Постоянное перенаправление.
302  | Временное перенаправление.
400  | Параметры в URL-адрес или в тексте запроса являются недопустимыми.
401  | Предоставленные учетные данные являются недопустимыми.
403  | Действие не допускается, учитывая указанные учетные данные.
404  | Запрошенный ресурс не существует.
409  | Запрос конфликтует с существующим ресурсом.
500  | Служба обнаружил непредвиденную ошибку.
503  | Служба временно недоступна.

Любой `GET` запрос к конечной точке API может возвращать перенаправления HTTP (301 или 302). Клиенты должны корректно обрабатывать такие перенаправления, наблюдая за `Location` заголовка и выдача последующая `GET`. Документация, касающаяся определенные конечные точки не вызовет явным образом, где может использоваться перенаправления.

В случае с кодом состояния уровня 500 клиент можно реализовать механизм повтора разумным. Официальный NuGet клиент выполняет повторение три раза при обнаружении любой код состояния 500 или ошибка TCP/DNS.

## <a name="http-request-headers"></a>Заголовки HTTP-запроса

name                     | Описание:
------------------------ | -----------
X-NuGet-ApiKey           | Требуется для принудительной отправки и удаления, см. в разделе [ `PackagePublish` ресурсов](package-publish-resource.md)
X-NuGet-Client-Version   | **Рекомендуется использовать** и заменяется `X-NuGet-Protocol-Version`
X-NuGet-Protocol-Version | Требуется в некоторых случаях только на сайте nuget.org, см. в разделе [протоколы nuget.org](NuGet-Protocols.md)
X-NuGet-Session-Id       | *Необязательный*. NuGet клиентов v4.7 + определите HTTP-запросы, которые являются частью одного сеанса клиента NuGet. Для `PackageReference` операции восстановления является идентификатором одного сеанса, для других сценариев, таких как автоматическое завершение, и `packages.config` восстановления, может существовать несколько разных идентификатор сеанса из-за как добавляется код.

## <a name="authentication"></a>Проверка подлинности

Проверка подлинности возлагается на реализации источника пакета для определения. Для nuget.org, только `PackagePublish` ресурс требует проверки подлинности через специальный заголовок ключа API. См. в разделе [ `PackagePublish` ресурсов](package-publish-resource.md) подробные сведения.
