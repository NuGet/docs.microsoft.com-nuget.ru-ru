---
title: Метаданные пакета, NuGet API
description: Пакет регистрации базовый URL-адрес позволяет получение метаданных о пакетах.
author: joelverhagen
ms.author: jver
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: 19a1f48164f65f1ff805e036e55abb110247aa72
ms.sourcegitcommit: 6ea2ff8aaf7743a6f7c687c8a9400b7b60f21a52
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/16/2019
ms.locfileid: "54324868"
---
# <a name="package-metadata"></a>Метаданные пакета

Существует возможность получить метаданные о пакетов, доступных в источнике пакета с помощью NuGet V3 API. Эти метаданные можно извлечь с помощью `RegistrationsBaseUrl` найти ресурс в [индекс службы](service-index.md).

Коллекция документов, найти в разделе `RegistrationsBaseUrl` часто называются «регистрация» или «большие двоичные объекты для регистрации». Набор документов для одной `RegistrationsBaseUrl` называется «кустом регистрации». Hive регистрации содержит все метаданные о каждый пакет, доступный в источнике пакета.

## <a name="versioning"></a>Управление версиями

Следующие `@type` значения используются:

Значение@type                      | Примечания
------------------------------- | -----
RegistrationsBaseUrl            | Первоначальный выпуск
RegistrationsBaseUrl/3.0.0-beta | Псевдоним `RegistrationsBaseUrl`
RegistrationsBaseUrl/3.0.0-rc   | Псевдоним `RegistrationsBaseUrl`
RegistrationsBaseUrl/3.4.0      | Ответы со сжатием gzip
RegistrationsBaseUrl/3.6.0      | Включает в себя пакеты SemVer 2.0.0.

Представляет три различных регистрации кусты, доступные для различных версий клиента.

### <a name="registrationsbaseurl"></a>RegistrationsBaseUrl

Эти операции регистрации не были сжаты (то есть они используют подразумеваемый `Content-Encoding: identity`). Пакеты SemVer 2.0.0 **исключены** из этого hive.

### <a name="registrationsbaseurl340"></a>RegistrationsBaseUrl/3.4.0

Эти операции регистрации сжимаются с помощью `Content-Encoding: gzip`. Пакеты SemVer 2.0.0 **исключены** из этого hive.

### <a name="registrationsbaseurl360"></a>RegistrationsBaseUrl/3.6.0

Эти операции регистрации сжимаются с помощью `Content-Encoding: gzip`. Пакеты SemVer 2.0.0 **включены** в этом кусте.
Дополнительные сведения о SemVer 2.0.0, см. в разделе [поддержки SemVer 2.0.0 для nuget.org](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29).

## <a name="base-url"></a>Базовый URL-адрес

Базовый URL-адрес для следующих API-интерфейсов является значением `@id` свойство, связанное с ресурсом, упомянутых выше `@type` значения. В следующем документе заполнитель базовый URL-адрес `{@id}` будет использоваться.

## <a name="http-methods"></a>Методы HTTP

Все URL-адреса, найден в регистрации ресурсов поддерживают методы HTTP `GET` и `HEAD`.

## <a name="registration-index"></a>Индекс регистрации

Группы ресурсов регистрации пакета метаданных по идентификатору пакета. Не поддерживается для получения данных о более чем один идентификатор пакета одновременно. Этот ресурс не предусматривает способа обнаружения идентификаторы пакетов. Вместо этого клиент предполагается, что известен его идентификатор нужного пакета. Доступные метаданные о каждой версии пакета зависит от реализации сервера. Пакет регистрации большие двоичные объекты имеют следующей иерархической структуре:

- **Индекс**: точка входа для метаданных пакета, совместно использоваться всеми пакетами в источник с таким же идентификатором пакета.
- **Страница**: группирование версии пакетов. Число версий пакета на странице определяется реализации сервера.
- **Конечный**: документа, зависит от версии одного пакета.

URL-адрес регистрации индекса является прогнозируемым и можно определить с помощью клиента, идентификатор пакета и ресурс регистрации `@id` значение из индекса службы. URL-адреса страницы регистрации и оставляет обнаруживаются, проверяя индекс регистрации.

### <a name="registration-pages-and-leaves"></a>Страницы регистрации и оставляет

Несмотря на то, что он не обязательно для реализации сервера для хранения, регистрации листья в отдельной регистрации Многостраничные документы, это рекомендуется для экономии памяти на стороне клиента. Вместо встроив все регистрации оставляет в индекс или немедленно хранение оставляет в Многостраничные документы, рекомендуется определять что серверной реализации определенной эвристики, чтобы выбрать между двумя подходами, в зависимости от числа версий пакета или оставляет совокупный размер пакета.

Хранение всех версий пакета конечных в сохраняет индекс регистрации на количество HTTP-запросов необходимые метаданные пакета выборки, но также означает, что большего документа должны быть загружены и больший объем памяти клиента должен быть выделен. С другой стороны Если в реализации сервера сразу же записала оставляет регистрации в документах на отдельной странице, то клиент должен выполнить дополнительные HTTP-запросы для получения необходимой ему информации.

Эвристический алгоритм, который использует nuget.org выглядит следующим образом: Если имеется 128 или несколько версий пакета, разбить листьев на страницах размером 64. Если существует версий менее 128, все встроенные оставляет в индекс регистрации.

    GET {@id}/{LOWER_ID}/index.json

### <a name="request-parameters"></a>Параметры запроса

name     | Увеличение     | Тип    | Обязательно | Примечания
-------- | ------ | ------- | -------- | -----
LOWER_ID | URL-адрес    | string  | да      | Идентификатор пакета, букв

`LOWER_ID` Значение является Идентификатором нужного пакета букв с помощью правил, реализованных по. NET [ `System.String.ToLowerInvariant()` ](/dotnet/api/system.string.tolowerinvariant?view=netstandard-2.0#System_String_ToLowerInvariant) метод.

### <a name="response"></a>Ответ

Ответ представляет собой документ JSON, который имеет корневой объект со следующими свойствами:

name  | Тип             | Обязательно | Примечания
----- | ---------------- | -------- | -----
count | целочисленный          | да      | Число страниц регистрации в индексе
items | Массив объектов | да      | Массив страниц регистрации

Каждый элемент в объекте index `items` массива представляет собой объект JSON, представляющий страницу регистрации.

#### <a name="registration-page-object"></a>Объект страницы регистрации

Объект страницы регистрации, обнаруженной в индексе регистрации имеет следующие свойства:

name   | Тип             | Обязательно | Примечания
------ | ---------------- | -------- | -----
@id    | string           | да      | URL-адрес страницы регистрации
count  | целочисленный          | да      | Количество регистрации конечных на странице
items  | Массив объектов | Нет       | Массив оставляет, регистрации и их связывание метаданных
нижний  | string           | да      | Самую раннюю версию SemVer 2.0.0. на странице (включительно)
parent | string           | Нет       | URL-адрес регистрации индекс
верхний  | string           | да      | Самую новую версию SemVer 2.0.0. на странице (включительно)

`lower` И `upper` границы объекта page полезны, если требуются метаданные для версии определенную страницу.
Эти границы можно использовать только страницу регистрации требуется получить. Версии строк соответствуют [правила версии NuGet](../reference/package-versioning.md). Версии строк, нормализованы и не включают сборки метаданных. Как со всеми версиями в экосистеме NuGet сравнения строк версии реализуется с помощью [правила приоритета версии SemVer 2.0.0's](http://semver.org/spec/v2.0.0.html#spec-item-11).

`parent` Свойство будет отображаться только в том случае, если объект страницы регистрации `items` свойство.

Если `items` свойство не существует в объекте страницы регистрации, URL-адрес указан в `@id` должен использоваться для извлечения метаданных о версиях отдельных пакетов. `items` Массива иногда исключается из объекта page для оптимизации. Если число версий одного пакета идентификатора очень велик, индексирование документа регистрации будет крупного и дополнительными издержками, к процессу для клиента, который волнует только о конкретной версии или небольшой диапазон версий.

Обратите внимание, что если `items` свойство присутствует, `@id` свойство нет необходимости в применении, так как все данные страницы уже встроена в `items` свойство.

Каждый элемент в объект страницы `items` массива представляет собой объект JSON, представляющий конечный регистрации и связанные с ней метаданные.

#### <a name="registration-leaf-object-in-a-page"></a>Конечный объект регистрации на странице

Конечный объект регистрации, на странице регистрации имеет следующие свойства:

name           | Тип   | Обязательно | Примечания
-------------- | ------ | -------- | -----
@id            | string | да      | URL-адрес конечного регистрации
catalogEntry   | object | да      | Запись каталога, содержащий метаданные пакета
packageContent | string | да      | URL-адрес содержимого пакета (файла nupkg)

Каждой регистрации конечного объекта представляет данные, связанные с версии одного пакета.

#### <a name="catalog-entry"></a>Запись каталога

`catalogEntry` Свойства конечного объекта регистрации имеет следующие свойства:

name                     | Тип                       | Обязательно | Примечания
------------------------ | -------------------------- | -------- | -----
@id                      | string                     | да      | URL-адрес документа, который используется для получения этого объекта
authors                  | Строка или массив строк | Нет       | 
dependencyGroups         | Массив объектов           | Нет       | Зависимости пакета, сгруппированные по требуемой версии .NET framework
Описание              | string                     | Нет       | 
iconUrl                  | string                     | Нет       | 
id                       | string                     | да      | Идентификатор пакета
licenseUrl               | string                     | Нет       |
licenseExpression        | string                     | Нет       | 
перечисленные                   | boolean                    | Нет       | Можно рассматривать как перечисленные Если значение отсутствует
MinClientVersion         | string                     | Нет       | 
projectUrl               | string                     | Нет       | 
Опубликованные                | string                     | Нет       | Строка, содержащая метку времени ISO 8601 Если пакет был опубликован
requireLicenseAcceptance | boolean                    | Нет       | 
сводка                  | string                     | Нет       | 
теги                     | Строка или массив строк  | Нет       | 
заголовок                    | string                     | Нет       | 
version                  | string                     | да      | Полная версия строки после нормализации

Пакет `version` свойство — это строка полной версии после нормализации. Это означает, что данные SemVer 2.0.0 сборки можно включить здесь.

`dependencyGroups` Свойство представляет собой массив объектов, представляющих зависимости пакета, сгруппированных по целевой платформе. Если пакет не имеет зависимостей, `dependencyGroups` свойство отсутствует, пустой массив, или `dependencies` свойства всех групп пуст или отсутствует.

Значение `licenseExpression` соответствует свойство [синтаксис выражений лицензии NuGet](https://docs.microsoft.com/en-us/nuget/reference/nuspec#license).

#### <a name="package-dependency-group"></a>Группа зависимостей пакета

Каждому объекту типа group зависимостей имеет следующие свойства:

name            | Тип             | Обязательно | Примечания
--------------- | ---------------- | -------- | -----
targetFramework | string           | Нет       | Требуемая версия .NET framework, которые применяются эти зависимости
зависимости    | Массив объектов | Нет       |

`targetFramework` Строка использует формат, реализованную библиотекой .NET NuGet [NuGet.Frameworks](https://www.nuget.org/packages/NuGet.Frameworks/). Если нет `targetFramework` указан, группа зависимостей применяется для всех целевых платформ.

`dependencies` Свойство представляет собой массив объектов, каждый из которых представляет зависимость пакета текущего пакета.

#### <a name="package-dependency"></a>Зависимость пакета

Каждая зависимость пакета имеет следующие свойства:

name         | Тип   | Обязательно | Примечания
------------ | ------ | -------- | -----
id           | string | да      | Идентификатор пакета зависимостей
range        | object | Нет       | Допустимые [диапазон версий](../reference/package-versioning.md#version-ranges-and-wildcards) зависимости
регистрация | string | Нет       | URL-адрес регистрации индекс для этой зависимости

Если `range` исключено свойство или является пустой строкой, клиент по умолчанию диапазон версий `(, )`. То есть допускается любой версии зависимости.

### <a name="sample-request"></a>Пример запроса

    GET https://api.nuget.org/v3/registration3/nuget.server.core/index.json

### <a name="sample-response"></a>Пример ответа

[!code-JSON [package-registration-index.json](./_data/package-registration-index.json)]

В данном конкретном случае индекс регистрации имеет странице регистрации как встроенный, поэтому необходимо получить метаданные о версиях отдельного пакета без дополнительных запросов.

## <a name="registration-page"></a>Страница регистрации

На странице регистрации содержит оставляет регистрации. URL-адрес для получения страницы регистрации определяется `@id` свойство в [объект страницы регистрации](#registration-page-object) упомянутых выше.

Когда `items` в регистрации индекс массива не указан, запрос HTTP GET из `@id` значение возвращает документ JSON, который имеет объект как корень. Объект имеет следующие свойства:

name   | Тип             | Обязательно | Примечания
------ | ---------------- | -------- | -----
@id    | string           | да      | URL-адрес страницы регистрации
count  | целочисленный          | да      | Количество регистрации конечных на странице
items  | Массив объектов | да      | Массив оставляет, регистрации и их связывание метаданных
нижний  | string           | да      | Самую раннюю версию SemVer 2.0.0. на странице (включительно)
parent | string           | да      | URL-адрес регистрации индекс
верхний  | string           | да      | Самую новую версию SemVer 2.0.0. на странице (включительно)

Фигуры конечных объектов регистрации аналогична описанной в индекс регистрации [выше](#registration-leaf-object-in-a-page).

## <a name="sample-request"></a>Пример запроса

    GET https://api.nuget.org/v3/registration3/ravendb.client/page/1.0.531/1.0.729-unstable.json

## <a name="sample-response"></a>Пример ответа

[!code-JSON [package-registration-page.json](./_data/package-registration-page.json)]

## <a name="registration-leaf"></a>Конечный регистрации

Конечный регистрации содержит сведения о конкретных ИД и версию пакета. Метаданные о конкретной версии не могут быть доступны в этом документе. Метаданные пакета должны быть извлечены из [индекс регистрации](#registration-index) или [страницу регистрации](#registration-page) (который обнаружения с помощью индекса регистрации).

URL-адрес для получения конечного регистрации получается из `@id` свойства конечного объекта регистрации в страницы регистрации или регистрации индекса.

Конечный регистрации — это документ JSON с корневого объекта со следующими свойствами:

name           | Тип    | Обязательно | Примечания
-------------- | ------- | -------- | -----
@id            | string  | да      | URL-адрес конечного регистрации
catalogEntry   | string  | Нет       | URL-адрес записи каталога, которая является создателем эти конечные
перечисленные         | boolean | Нет       | Можно рассматривать как перечисленные Если значение отсутствует
packageContent | string  | Нет       | URL-адрес содержимого пакета (файла nupkg)
Опубликованные      | string  | Нет       | Строка, содержащая метку времени ISO 8601 Если пакет был опубликован
регистрация   | string  | Нет       | URL-адрес регистрации индекс

> [!Note]
> На сайте nuget.org `published` имеет значение года с 1900, если пакет не включенных в список.

### <a name="sample-request"></a>Пример запроса

    GET https://api.nuget.org/v3/registration3/nuget.versioning/4.3.0.json

### <a name="sample-response"></a>Пример ответа

[!code-JSON [package-registration-leaf.json](./_data/package-registration-leaf.json)]
