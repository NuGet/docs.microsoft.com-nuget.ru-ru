---
title: Автозаполнение, API NuGet
description: Служба автозаполнения поиска поддерживает интерактивное обнаружение идентификаторов и версий пакетов.
author: joelverhagen
ms.author: jver
ms.date: 10/26/2017
ms.topic: reference
ms.reviewer: kraigb
ms.openlocfilehash: f574849bf99cd4da4eefd55c3dd5a0648042f0c1
ms.sourcegitcommit: 7e9c0630335ef9ec1e200e2ee9065f702e52a8ec
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/24/2020
ms.locfileid: "85292297"
---
# <a name="autocomplete"></a>Автозавершение

Можно создать идентификатор пакета и Автозаполнение версий с помощью API V3. Ресурс, используемый для выполнения запросов автозаполнения, — это `SearchAutocompleteService` ресурс, найденный в [индексе службы](service-index.md).

## <a name="versioning"></a>Управление версиями

Используются следующие `@type` значения:

Значение@type                          | Примечания
------------------------------------ | -----
сеарчаутокомплетесервице            | Первоначальный выпуск
Сеарчаутокомплетесервице/3.0.0 — бета-версия | Псевдоним`SearchAutocompleteService`
Сеарчаутокомплетесервице/3.0.0-RC   | Псевдоним`SearchAutocompleteService`
Сеарчаутокомплетесервице/3.5.0      | Включает поддержку `packageType` параметра запроса

### <a name="searchautocompleteservice350"></a>Сеарчаутокомплетесервице/3.5.0
Эта версия предоставляет поддержку для `packageType` параметра запроса, что позволяет выполнять фильтрацию по определенным типам пакетов. Он полностью обратно совместим с запросами к `SearchAutocompleteService` .

## <a name="base-url"></a>Базовый URL-адрес

Базовый URL-адрес для следующих API-интерфейсов — это значение `@id` свойства, связанного с одним из вышеупомянутых `@type` значений ресурсов. В следующем документе будет использоваться базовый URL-адрес заполнителя `{@id}` .

## <a name="http-methods"></a>Методы HTTP

Все URL-адреса, найденные в ресурсе регистрации, поддерживают методы HTTP `GET` и `HEAD` .

## <a name="search-for-package-ids"></a>Поиск идентификаторов пакетов

Первый API автозаполнения поддерживает поиск части строки идентификатора пакета. Это очень удобно, если вы хотите предоставить typeahead пакета в пользовательском интерфейсе, интегрированном с источником пакета NuGet.

Пакет, содержащий только непоставленные версии, не будет отображаться в результатах.

    GET {@id}?q={QUERY}&skip={SKIP}&take={TAKE}&prerelease={PRERELEASE}&semVerLevel={SEMVERLEVEL}&packageType={PACKAGETYPE}

### <a name="request-parameters"></a>Параметры запроса

Имя        | В     | Тип    | Обязательно | Примечания
----------- | ------ | ------- | -------- | -----
q           | URL-адрес    | строка  | нет       | Строка для сравнения с идентификаторами пакета
skip        | URL-адрес    | Целое число | нет       | Число пропускаемых результатов для разбивки на страницы
take        | URL-адрес    | Целое число | нет       | Число возвращаемых результатов для разбивки на страницы
prerelease  | URL-адрес    | Логическое | нет       | `true`или `false` определить, следует ли включать [пакеты предварительной версии](../create-packages/prerelease-packages.md)
семверлевел | URL-адрес    | строка  | нет       | Строка версии SemVer 1.0.0 
packageType | URL-адрес    | строка  | нет       | Тип пакета, используемый для фильтрации пакетов (добавляется в `SearchAutocompleteService/3.5.0` )

Запрос автозаполнения `q` анализируется способом, который определяется реализацией сервера. nuget.org поддерживает запросы к префиксам токенов ИДЕНТИФИКАТОРов пакетов, которые представляют собой фрагменты идентификатора, созданного путем разделения оригинала на символы Camel и символов.

Значение `skip` параметра по умолчанию равно 0.

`take`Параметр должен быть целым числом больше нуля. Реализация сервера может накладывать максимальное значение.

Если `prerelease` не указан, пакеты предварительной версии исключаются.

`semVerLevel`Параметр запроса используется для явного согласия на [пакеты 2.0.0 SemVer](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29#identifying-semver-v200-packages).
Если этот параметр запроса исключен, будут возвращены только идентификаторы пакетов с совместимыми версиями SemVer 1.0.0 (со [стандартными предупреждениями управления версиями NuGet](../concepts/package-versioning.md) , такими как строки версии с 4 целыми частями).
Если указан `semVerLevel=2.0.0` , будут возвращены совместимые пакеты SemVer 1.0.0 и SemVer 2.0.0. Дополнительные сведения см. в разделе [Поддержка SemVer 2.0.0 для NuGet.org](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29) .

`packageType`Параметр используется для дальнейшей фильтрации результатов автозаполнения только в пакетах, имеющих по крайней мере один тип пакета, совпадающий с именем типа пакета.
Если предоставленный тип пакета не является допустимым типом пакета, как определено в [документе типа пакета](https://github.com/NuGet/Home/wiki/Package-Type-%5BPacking%5D), будет возвращен пустой результат.
Если предоставленный тип пакета пуст, фильтр применяться не будет. Иными словами, передача значения в `packageType` параметр будет вести себя так, как если бы параметр не был передан.

### <a name="response"></a>Ответ

Ответ — это документ JSON, содержащий `take` результаты автозаполнения.

Корневой объект JSON имеет следующие свойства:

Имя      | Тип             | Обязательно | Примечания
--------- | ---------------- | -------- | -----
тоталхитс | Целое число          | да      | Общее число совпадений, неотношении `skip` и`take`
.      | Массив строк | да      | Идентификаторы пакетов, совпадающие по запросу

### <a name="sample-request"></a>Пример запроса

    GET https://api-v2v3search-0.nuget.org/autocomplete?q=storage&prerelease=true

### <a name="sample-response"></a>Пример ответа

[!code-JSON [autocomplete-id-result.json](./_data/autocomplete-id-result.json)]

## <a name="enumerate-package-versions"></a>Перечислить версии пакета

После того как идентификатор пакета будет обнаружен с помощью предыдущего API, клиент может использовать API автозаполнения для перечисления версий пакета для указанного идентификатора пакета.

Версия пакета, которая не указана в списке, не будет отображаться в результатах.

    GET {@id}?id={ID}&prerelease={PRERELEASE}&semVerLevel={SEMVERLEVEL}

### <a name="request-parameters"></a>Параметры запроса

Имя        | В     | Тип    | Обязательно | Примечания
----------- | ------ | ------- | -------- | -----
идентификатор          | URL-адрес    | строка  | да      | Идентификатор пакета для выборки версий для
prerelease  | URL-адрес    | Логическое | нет       | `true`или `false` определить, следует ли включать [пакеты предварительной версии](../create-packages/prerelease-packages.md)
семверлевел | URL-адрес    | строка  | нет       | Строка версии 2.0.0 SemVer 

Если `prerelease` не указан, пакеты предварительной версии исключаются.

`semVerLevel`Параметр запроса используется для явного согласия на пакеты 2.0.0 SemVer. Если этот параметр запроса исключен, будут возвращены только версии SemVer 1.0.0. Если указан `semVerLevel=2.0.0` , будут возвращены версии SemVer 1.0.0 и SemVer 2.0.0. Дополнительные сведения см. в разделе [Поддержка SemVer 2.0.0 для NuGet.org](https://github.com/NuGet/Home/wiki/SemVer2-support-for-nuget.org-%28server-side%29) .

### <a name="response"></a>Ответ

Ответ — это документ JSON, содержащий все версии пакета указанного идентификатора пакета, который фильтрует по заданным параметрам запроса.

Корневой объект JSON имеет следующее свойство:

Имя      | Тип             | Обязательно | Примечания
--------- | ---------------- | -------- | -----
.      | Массив строк | да      | Версии пакета, соответствующие запросу

Версии пакета в `data` массиве могут содержать метаданные сборки SemVer 2.0.0 (например, `1.0.0+metadata` ), если в `semVerLevel=2.0.0` строке запроса содержится.

### <a name="sample-request"></a>Пример запроса

    GET https://api-v2v3search-0.nuget.org/autocomplete?id=nuget.protocol&prerelease=true

### <a name="sample-response"></a>Пример ответа

[!code-JSON [autocomplete-version-result.json](./_data/autocomplete-version-result.json)]
